[debug] [2023-12-28T00:39:57.237Z] ----------------------------------------------------------------------
[debug] [2023-12-28T00:39:57.239Z] Command:       /Users/peterchen/.nvm/versions/node/v18.17.1/bin/node /Users/peterchen/.nvm/versions/node/v18.17.1/bin/firebase emulators:start --only functions,auth,firestore,database
[debug] [2023-12-28T00:39:57.239Z] CLI Version:   12.8.0
[debug] [2023-12-28T00:39:57.240Z] Platform:      darwin
[debug] [2023-12-28T00:39:57.240Z] Node Version:  v18.17.1
[debug] [2023-12-28T00:39:57.242Z] Time:          Wed Dec 27 2023 16:39:57 GMT-0800 (Pacific Standard Time)
[debug] [2023-12-28T00:39:57.242Z] ----------------------------------------------------------------------
[debug] 
[debug] [2023-12-28T00:39:57.412Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2023-12-28T00:39:57.413Z] > authorizing via signed-in user (peterchen.eth@gmail.com)
[debug] [2023-12-28T00:39:57.579Z] openjdk version "21" 2023-09-19

[debug] [2023-12-28T00:39:57.581Z] OpenJDK Runtime Environment Homebrew (build 21)
OpenJDK 64-Bit Server VM Homebrew (build 21, mixed mode, sharing)

[debug] [2023-12-28T00:39:57.589Z] Parsed Java major version: 21
[info] i  emulators: Starting emulators: auth, functions, firestore, database {"metadata":{"emulator":{"name":"hub"},"message":"Starting emulators: auth, functions, firestore, database"}}
[debug] [2023-12-28T00:39:58.861Z] [logging] Logging Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-12-28T00:39:58.862Z] [auth] Authentication Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-12-28T00:39:58.863Z] [firestore] Firestore Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-12-28T00:39:58.863Z] [firestore.websocket] websocket server for firestore only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-12-28T00:39:58.864Z] [database] Database Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-12-28T00:39:58.864Z] assigned listening specs for emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":5002}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"database":[{"address":"127.0.0.1","family":"IPv4","port":9000}]},"metadata":{"message":"assigned listening specs for emulators"}}
[debug] [2023-12-28T00:39:58.879Z] [hub] writing locator at /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/hub-openid3-bbd1b.json
[debug] [2023-12-28T00:39:59.240Z] [functions] Functions Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-12-28T00:39:59.241Z] [eventarc] Eventarc Emulator only supports listening on one address (127.0.0.1). Not listening on ::1
[debug] [2023-12-28T00:39:59.241Z] late-assigned ports for functions and eventarc emulators {"user":{"hub":[{"address":"127.0.0.1","family":"IPv4","port":4400},{"address":"::1","family":"IPv6","port":4400}],"ui":[{"address":"127.0.0.1","family":"IPv4","port":4000},{"address":"::1","family":"IPv6","port":4000}],"logging":[{"address":"127.0.0.1","family":"IPv4","port":4500}],"auth":[{"address":"127.0.0.1","family":"IPv4","port":9099}],"firestore":[{"address":"127.0.0.1","family":"IPv4","port":5002}],"firestore.websocket":[{"address":"127.0.0.1","family":"IPv4","port":9150}],"database":[{"address":"127.0.0.1","family":"IPv4","port":9000}],"functions":[{"address":"127.0.0.1","family":"IPv4","port":5001}],"eventarc":[{"address":"127.0.0.1","family":"IPv4","port":9299}]},"metadata":{"message":"late-assigned ports for functions and eventarc emulators"}}
[warn] ⚠  functions: The following emulators are not running, calls to these services from the Functions emulator will affect production: hosting, pubsub, storage {"metadata":{"emulator":{"name":"functions"},"message":"The following emulators are not running, calls to these services from the Functions emulator will affect production: \u001b[1mhosting, pubsub, storage\u001b[22m"}}
[debug] [2023-12-28T00:39:59.245Z] defaultcredentials: writing to file /Users/peterchen/.config/firebase/peterchen_eth_gmail.com_application_default_credentials.json
[debug] [2023-12-28T00:39:59.252Z] Setting GAC to /Users/peterchen/.config/firebase/peterchen_eth_gmail.com_application_default_credentials.json {"metadata":{"emulator":{"name":"functions"},"message":"Setting GAC to /Users/peterchen/.config/firebase/peterchen_eth_gmail.com_application_default_credentials.json"}}
[debug] [2023-12-28T00:39:59.255Z] > refreshing access token with scopes: []
[debug] [2023-12-28T00:39:59.257Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2023-12-28T00:39:59.259Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-12-28T00:39:59.434Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2023-12-28T00:39:59.436Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2023-12-28T00:39:59.458Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/openid3-bbd1b/adminSdkConfig [none]
[debug] [2023-12-28T00:39:59.922Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/openid3-bbd1b/adminSdkConfig 200
[debug] [2023-12-28T00:39:59.926Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/openid3-bbd1b/adminSdkConfig {"projectId":"openid3-bbd1b","databaseURL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","storageBucket":"openid3-bbd1b.appspot.com"}
[debug] [2023-12-28T00:39:59.984Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-12-28T00:39:59.984Z] Ignoring unsupported arg: single_project_mode_error {"metadata":{"emulator":{"name":"firestore"},"message":"Ignoring unsupported arg: single_project_mode_error"}}
[debug] [2023-12-28T00:39:59.984Z] Starting Firestore Emulator with command {"binary":"java","args":["-Dgoogle.cloud_firestore.debug_log_level=FINE","-Duser.language=en","-jar","/Users/peterchen/.cache/firebase/emulators/cloud-firestore-emulator-v1.18.2.jar","--host","127.0.0.1","--port",5002,"--websocket_port",9150,"--project_id","openid3-bbd1b","--rules","/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/firestore.rules","--single_project_mode",true,"--functions_emulator","127.0.0.1:5001"],"optionalArgs":["port","webchannel_port","host","rules","websocket_port","functions_emulator","seed_from_export","project_id","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"firestore"},"message":"Starting Firestore Emulator with command {\"binary\":\"java\",\"args\":[\"-Dgoogle.cloud_firestore.debug_log_level=FINE\",\"-Duser.language=en\",\"-jar\",\"/Users/peterchen/.cache/firebase/emulators/cloud-firestore-emulator-v1.18.2.jar\",\"--host\",\"127.0.0.1\",\"--port\",5002,\"--websocket_port\",9150,\"--project_id\",\"openid3-bbd1b\",\"--rules\",\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/firestore.rules\",\"--single_project_mode\",true,\"--functions_emulator\",\"127.0.0.1:5001\"],\"optionalArgs\":[\"port\",\"webchannel_port\",\"host\",\"rules\",\"websocket_port\",\"functions_emulator\",\"seed_from_export\",\"project_id\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  firestore: Firestore Emulator logging to firestore-debug.log {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator logging to \u001b[1mfirestore-debug.log\u001b[22m"}}
[debug] [2023-12-28T00:40:00.645Z] Dec 27, 2023 4:40:00 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start
INFO: Started WebSocket server on ws://127.0.0.1:9150
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:00 PM com.google.cloud.datastore.emulator.firestore.websocket.WebSocketServer start\nINFO: Started WebSocket server on ws://127.0.0.1:9150\n"}}
[debug] [2023-12-28T00:40:00.661Z] API endpoint: http:// {"metadata":{"emulator":{"name":"firestore"},"message":"API endpoint: http://"}}
[debug] [2023-12-28T00:40:00.662Z] 127.0.0.1:5002
If you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:

   export FIRESTORE_EMULATOR_HOST=127.0.0.1:5002

Dev App Server is now running.

 {"metadata":{"emulator":{"name":"firestore"},"message":"127.0.0.1:5002\nIf you are using a library that supports the FIRESTORE_EMULATOR_HOST environment variable, run:\n\n   export FIRESTORE_EMULATOR_HOST=127.0.0.1:5002\n\nDev App Server is now running.\n\n"}}
[info] ✔  firestore: Firestore Emulator UI websocket is running on 9150. {"metadata":{"emulator":{"name":"firestore"},"message":"Firestore Emulator UI websocket is running on 9150."}}
[debug] [2023-12-28T00:40:00.762Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/openid3-bbd1b [none]
[debug] [2023-12-28T00:40:00.935Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/openid3-bbd1b 200
[debug] [2023-12-28T00:40:00.936Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/openid3-bbd1b {"projectId":"openid3-bbd1b","projectNumber":"281794963795","displayName":"openid3","name":"projects/openid3-bbd1b","resources":{"hostingSite":"openid3-bbd1b","realtimeDatabaseInstance":"openid3-bbd1b-default-rtdb"},"state":"ACTIVE","etag":"1_3ea7584a-b1ce-45de-b001-22db8027c603"}
[debug] [2023-12-28T00:40:00.937Z] database rules config:  [{"instance":"openid3-bbd1b-default-rtdb","rules":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/database.rules.json"}]
[debug] [2023-12-28T00:40:00.946Z] Ignoring unsupported arg: projectId {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: projectId"}}
[debug] [2023-12-28T00:40:00.946Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-12-28T00:40:00.947Z] Ignoring unsupported arg: rules {"metadata":{"emulator":{"name":"database"},"message":"Ignoring unsupported arg: rules"}}
[debug] [2023-12-28T00:40:00.947Z] Starting Database Emulator with command {"binary":"java","args":["-Duser.language=en","-jar","/Users/peterchen/.cache/firebase/emulators/firebase-database-emulator-v4.11.2.jar","--host","127.0.0.1","--port",9000,"--single_project_mode","Warning","--functions_emulator_host","127.0.0.1","--functions_emulator_port",5001],"optionalArgs":["port","host","functions_emulator_port","functions_emulator_host","single_project_mode"],"joinArgs":false} {"metadata":{"emulator":{"name":"database"},"message":"Starting Database Emulator with command {\"binary\":\"java\",\"args\":[\"-Duser.language=en\",\"-jar\",\"/Users/peterchen/.cache/firebase/emulators/firebase-database-emulator-v4.11.2.jar\",\"--host\",\"127.0.0.1\",\"--port\",9000,\"--single_project_mode\",\"Warning\",\"--functions_emulator_host\",\"127.0.0.1\",\"--functions_emulator_port\",5001],\"optionalArgs\":[\"port\",\"host\",\"functions_emulator_port\",\"functions_emulator_host\",\"single_project_mode\"],\"joinArgs\":false}"}}
[info] i  database: Database Emulator logging to database-debug.log {"metadata":{"emulator":{"name":"database"},"message":"Database Emulator logging to \u001b[1mdatabase-debug.log\u001b[22m"}}
[debug] [2023-12-28T00:40:01.600Z] 16:40:01.599 [NamespaceSystem-akka.actor.default-dispatcher-5] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started
 {"metadata":{"emulator":{"name":"database"},"message":"16:40:01.599 [NamespaceSystem-akka.actor.default-dispatcher-5] INFO akka.event.slf4j.Slf4jLogger - Slf4jLogger started\n"}}
[debug] [2023-12-28T00:40:01.700Z] 16:40:01.700 [main] INFO com.firebase.server.forge.App$ - Listening at 127.0.0.1:9000
 {"metadata":{"emulator":{"name":"database"},"message":"16:40:01.700 [main] INFO com.firebase.server.forge.App$ - Listening at 127.0.0.1:9000\n"}}
[debug] [2023-12-28T00:40:07.321Z] Ignoring unsupported arg: auto_download {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: auto_download"}}
[debug] [2023-12-28T00:40:07.323Z] Ignoring unsupported arg: port {"metadata":{"emulator":{"name":"ui"},"message":"Ignoring unsupported arg: port"}}
[debug] [2023-12-28T00:40:07.323Z] Starting Emulator UI with command {"binary":"node","args":["/Users/peterchen/.cache/firebase/emulators/ui-v1.11.7/server/server.js"],"optionalArgs":[],"joinArgs":false} {"metadata":{"emulator":{"name":"ui"},"message":"Starting Emulator UI with command {\"binary\":\"node\",\"args\":[\"/Users/peterchen/.cache/firebase/emulators/ui-v1.11.7/server/server.js\"],\"optionalArgs\":[],\"joinArgs\":false}"}}
[info] i  ui: Emulator UI logging to ui-debug.log {"metadata":{"emulator":{"name":"ui"},"message":"Emulator UI logging to \u001b[1mui-debug.log\u001b[22m"}}
[debug] [2023-12-28T00:40:07.464Z] Web / API server started at 127.0.0.1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at 127.0.0.1:4000\n"}}
[debug] [2023-12-28T00:40:07.469Z] Web / API server started at ::1:4000
 {"metadata":{"emulator":{"name":"ui"},"message":"Web / API server started at ::1:4000\n"}}
[info] i  functions: Watching "/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/" for Cloud Functions... {"metadata":{"emulator":{"name":"functions"},"message":"Watching \"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/\" for Cloud Functions..."}}
[debug] [2023-12-28T00:40:07.626Z] Validating nodejs source
[debug] [2023-12-28T00:40:08.568Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T00:40:08.568Z] Building nodejs source
[debug] [2023-12-28T00:40:08.568Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T00:40:08.573Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T00:40:08.588Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8073

[debug] [2023-12-28T00:40:09.943Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[info] ✔  functions[us-central1-getAddressByUid]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getAddressByUid). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getAddressByUid)."}}
[info] ✔  functions[us-central1-getUserByAddress]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getUserByAddress). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getUserByAddress)."}}
[info] ✔  functions[us-central1-getUserByUid]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getUserByUid). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getUserByUid)."}}
[info] ✔  functions[us-central1-registerUserWithPasskey]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/registerUserWithPasskey). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/registerUserWithPasskey)."}}
[info] ✔  functions[us-central1-getPasskeyChallenge]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getPasskeyChallenge). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getPasskeyChallenge)."}}
[info] ✔  functions[us-central1-loginWithPasskey]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/loginWithPasskey). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/loginWithPasskey)."}}
[info] ✔  functions[us-central1-sessionLogin]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/sessionLogin). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/sessionLogin)."}}
[info] ✔  functions[us-central1-getDeks]: http function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getDeks). {"metadata":{"emulator":{"name":"functions"},"message":"\u001b[1mhttp\u001b[22m function initialized (http://127.0.0.1:5001/openid3-bbd1b/us-central1/getDeks)."}}
[debug] [2023-12-28T00:40:10.435Z] >>> [apiv2][query] PUT http://127.0.0.1:9000/.settings/rules.json ns=openid3-bbd1b-default-rtdb
[debug] [2023-12-28T00:40:10.435Z] >>> [apiv2][body] PUT http://127.0.0.1:9000/.settings/rules.json "{\n  /* Visit https://firebase.google.com/docs/database/security to learn more about security rules. */\n  \"rules\": {\n    \".read\": false,\n    \".write\": false\n  }\n}"
[debug] [2023-12-28T00:40:10.738Z] 16:40:10.737 [NamespaceSystem-akka.actor.default-dispatcher-5] INFO com.firebase.core.namespace.NamespaceActor - openid3-bbd1b-default-rtdb successfully activated FBKV (SurveyIdle(0)) wait: 90ms, init: 0ms
 {"metadata":{"emulator":{"name":"database"},"message":"16:40:10.737 [NamespaceSystem-akka.actor.default-dispatcher-5] INFO com.firebase.core.namespace.NamespaceActor - openid3-bbd1b-default-rtdb successfully activated FBKV (SurveyIdle(0)) wait: 90ms, init: 0ms\n"}}
[debug] [2023-12-28T00:40:10.789Z] 16:40:10.789 [NamespaceSystem-blocking-namespace-operation-dispatcher-7] INFO com.firebase.core.namespace.StateManager - Namespace openid3-bbd1b-default-rtdb status Active to Active
 {"metadata":{"emulator":{"name":"database"},"message":"16:40:10.789 [NamespaceSystem-blocking-namespace-operation-dispatcher-7] INFO com.firebase.core.namespace.StateManager - Namespace openid3-bbd1b-default-rtdb status Active to Active\n"}}
[debug] [2023-12-28T00:40:10.807Z] <<< [apiv2][status] PUT http://127.0.0.1:9000/.settings/rules.json 200
[debug] [2023-12-28T00:40:10.807Z] <<< [apiv2][body] PUT http://127.0.0.1:9000/.settings/rules.json {"status":"ok"}
[info] 
┌─────────────────────────────────────────────────────────────┐
│ ✔  All emulators ready! It is now safe to connect your app. │
│ i  View Emulator UI at http://127.0.0.1:4000/               │
└─────────────────────────────────────────────────────────────┘

┌────────────────┬────────────────┬─────────────────────────────────┐
│ Emulator       │ Host:Port      │ View in Emulator UI             │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Authentication │ 127.0.0.1:9099 │ http://127.0.0.1:4000/auth      │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Functions      │ 127.0.0.1:5001 │ http://127.0.0.1:4000/functions │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Firestore      │ 127.0.0.1:5002 │ http://127.0.0.1:4000/firestore │
├────────────────┼────────────────┼─────────────────────────────────┤
│ Database       │ 127.0.0.1:9000 │ http://127.0.0.1:4000/database  │
└────────────────┴────────────────┴─────────────────────────────────┘
  Emulator Hub running at 127.0.0.1:4400
  Other reserved ports: 4500, 9150

Issues? Report them at https://github.com/firebase/firebase-tools/issues and attach the *-debug.log files.
 
[debug] [2023-12-28T00:40:13.729Z] Dec 27, 2023 4:40:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T00:40:13.814Z] Dec 27, 2023 4:40:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:13 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-12-28T00:40:14.208Z] Dec 27, 2023 4:40:14 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:14 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T00:40:14.215Z] Dec 27, 2023 4:40:14 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:14 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T00:40:23.577Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:40:23.575Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:40:23.586Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:40:23.575Z"],"workRunningCount":1}
[debug] [2023-12-28T00:40:23.587Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:40:23.608Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:40:23.609Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:40:23.617Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:40:23.618Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T00:40:24.663Z] [runtime-status] [54064] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:40:24.663Z] [runtime-status] [54064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:40:24.663Z] [runtime-status] [54064] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T00:40:24.665Z] [runtime-status] [54064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:40:24.850Z] [runtime-status] [54064] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T00:40:24.850Z] [runtime-status] [54064] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T00:40:24.851Z] [runtime-status] [54064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:40:24.852Z] [runtime-status] [54064] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:40:24.853Z] [runtime-status] [54064] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:40:24.854Z] [runtime-status] [54064] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T00:40:24.855Z] [runtime-status] [54064] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T00:40:25.278Z] [runtime-status] [54064] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T00:40:25.278Z] [runtime-status] [54064] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_e84efdcfdaa13e8e.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54064] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_e84efdcfdaa13e8e.sock"}}
[debug] [2023-12-28T00:40:25.358Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: IDLE"}}
[debug] [2023-12-28T00:40:25.359Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:40:25.360Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: BUSY"}}
[debug] [2023-12-28T00:40:25.364Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 5.152375ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 5.152375ms"}}
[debug] [2023-12-28T00:40:25.365Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: IDLE"}}
[debug] [2023-12-28T00:40:25.365Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:40:25.365Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:40:25.366Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:40:25.374Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:40:25.374Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:40:25.376Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:40:25.374Z"],"workRunningCount":1}
[debug] [2023-12-28T00:40:25.376Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:40:25.383Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:40:25.385Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:40:25.386Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:40:25.386Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[info] >  toBuffer(signature):  <Buffer 30 45 02 21 00 9a 76 96 ab d6 94 38 81 38 d6 f9 cd 5c 6b bb 02 6f 86 99 fc 77 ae f4 72 72 81 5f 86 cd f9 41 42 02 20 3e f6 eb dc 07 73 55 54 70 6a 50 ... 21 more bytes> {"user":"toBuffer(signature):  <Buffer 30 45 02 21 00 9a 76 96 ab d6 94 38 81 38 d6 f9 cd 5c 6b bb 02 6f 86 99 fc 77 ae f4 72 72 81 5f 86 cd f9 41 42 02 20 3e f6 eb dc 07 73 55 54 70 6a 50 ... 21 more bytes>","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m toBuffer(signature):  <Buffer 30 45 02 21 00 9a 76 96 ab d6 94 38 81 38 d6 f9 cd 5c 6b bb 02 6f 86 99 fc 77 ae f4 72 72 81 5f 86 cd f9 41 42 02 20 3e f6 eb dc 07 73 55 54 70 6a 50 ... 21 more bytes>"}}
[debug] [2023-12-28T00:40:26.025Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 638.835542ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 638.835542ms"}}
[debug] [2023-12-28T00:40:26.026Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: IDLE"}}
[debug] [2023-12-28T00:40:26.026Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:40:26.026Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:40:26.026Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:40:46.163Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:40:47.057Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T00:40:47.058Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T00:40:47.058Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:40:48.065Z] Validating nodejs source
[debug] [2023-12-28T00:40:49.183Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T00:40:49.183Z] Building nodejs source
[debug] [2023-12-28T00:40:49.184Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T00:40:49.186Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T00:40:49.190Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8892

[debug] [2023-12-28T00:40:50.356Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T00:40:50.385Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:40:50.385Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: FINISHING"}}
[debug] [2023-12-28T00:40:50.399Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: exited"}}
[debug] [2023-12-28T00:40:50.399Z] [worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-e42753bf-89e7-4a5a-b4aa-cdb4a788a9b4]: FINISHED"}}
[debug] [2023-12-28T00:40:58.182Z] Dec 27, 2023 4:40:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:58 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T00:40:58.216Z] Dec 27, 2023 4:40:58 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:58 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T00:40:58.218Z] Dec 27, 2023 4:40:58 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:40:58 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T00:41:07.827Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:41:07.825Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:41:07.829Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:41:07.825Z"],"workRunningCount":1}
[debug] [2023-12-28T00:41:07.829Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:41:07.841Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:41:07.842Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:41:07.842Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T00:41:07.857Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:41:07.860Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T00:41:08.978Z] [runtime-status] [54442] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:41:08.979Z] [runtime-status] [54442] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:41:08.979Z] [runtime-status] [54442] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T00:41:08.980Z] [runtime-status] [54442] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:41:09.164Z] [runtime-status] [54442] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T00:41:09.164Z] [runtime-status] [54442] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T00:41:09.164Z] [runtime-status] [54442] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:41:09.165Z] [runtime-status] [54442] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:41:09.166Z] [runtime-status] [54442] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:41:09.166Z] [runtime-status] [54442] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T00:41:09.168Z] [runtime-status] [54442] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T00:41:09.587Z] [runtime-status] [54442] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T00:41:09.588Z] [runtime-status] [54442] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_aaeb1860ede7bde8.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54442] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_aaeb1860ede7bde8.sock"}}
[debug] [2023-12-28T00:41:09.700Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: IDLE"}}
[debug] [2023-12-28T00:41:09.701Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:41:09.702Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: BUSY"}}
[debug] [2023-12-28T00:41:09.709Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 7.475458ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 7.475458ms"}}
[debug] [2023-12-28T00:41:09.710Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: IDLE"}}
[debug] [2023-12-28T00:41:09.710Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:41:09.710Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:41:09.710Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:41:09.716Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:41:09.716Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:41:09.716Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:41:09.716Z"],"workRunningCount":1}
[debug] [2023-12-28T00:41:09.716Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:41:09.721Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:41:09.722Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:41:09.722Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:41:09.723Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[info] >  signature.slice(2):  3045022100c8ea3ba921580249049ba7714ae69947391f2a73ce5db54265005f2ca374bdfa02207de8536be9cb664b32752c90e33ec2643b3ac806663ddec52e5a8f225581fafa {"user":"signature.slice(2):  3045022100c8ea3ba921580249049ba7714ae69947391f2a73ce5db54265005f2ca374bdfa02207de8536be9cb664b32752c90e33ec2643b3ac806663ddec52e5a8f225581fafa","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m signature.slice(2):  3045022100c8ea3ba921580249049ba7714ae69947391f2a73ce5db54265005f2ca374bdfa02207de8536be9cb664b32752c90e33ec2643b3ac806663ddec52e5a8f225581fafa"}}
[debug] [2023-12-28T00:41:10.374Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 651.486666ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 651.486666ms"}}
[debug] [2023-12-28T00:41:10.374Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: IDLE"}}
[debug] [2023-12-28T00:41:10.374Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:41:10.374Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:41:10.375Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:41:28.274Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:41:28.955Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T00:41:28.956Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T00:41:28.957Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:41:29.988Z] Validating nodejs source
[debug] [2023-12-28T00:41:30.949Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T00:41:30.949Z] Building nodejs source
[debug] [2023-12-28T00:41:30.950Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T00:41:30.954Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T00:41:30.958Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8382

[debug] [2023-12-28T00:41:32.131Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T00:41:32.174Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:41:32.174Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: FINISHING"}}
[debug] [2023-12-28T00:41:32.191Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: exited"}}
[debug] [2023-12-28T00:41:32.191Z] [worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-486d8502-8ea7-4784-afe8-5212bd5c3e3e]: FINISHED"}}
[debug] [2023-12-28T00:41:55.261Z] Dec 27, 2023 4:41:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:41:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T00:41:55.281Z] Dec 27, 2023 4:41:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:41:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T00:41:55.283Z] Dec 27, 2023 4:41:55 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:41:55 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T00:42:05.787Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:42:05.786Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:42:05.788Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:42:05.786Z"],"workRunningCount":1}
[debug] [2023-12-28T00:42:05.788Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:42:05.810Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:42:05.811Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:42:05.811Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T00:42:05.825Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:42:05.826Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T00:42:06.880Z] [runtime-status] [54987] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:42:06.880Z] [runtime-status] [54987] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:42:06.880Z] [runtime-status] [54987] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T00:42:06.882Z] [runtime-status] [54987] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:42:07.064Z] [runtime-status] [54987] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T00:42:07.064Z] [runtime-status] [54987] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T00:42:07.064Z] [runtime-status] [54987] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:42:07.065Z] [runtime-status] [54987] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:42:07.067Z] [runtime-status] [54987] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:42:07.067Z] [runtime-status] [54987] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T00:42:07.069Z] [runtime-status] [54987] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T00:42:07.481Z] [runtime-status] [54987] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T00:42:07.481Z] [runtime-status] [54987] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_af0646cbbc56bd15.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [54987] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_af0646cbbc56bd15.sock"}}
[debug] [2023-12-28T00:42:07.562Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: IDLE"}}
[debug] [2023-12-28T00:42:07.562Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:42:07.563Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: BUSY"}}
[debug] [2023-12-28T00:42:07.569Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 6.728083ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 6.728083ms"}}
[debug] [2023-12-28T00:42:07.570Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: IDLE"}}
[debug] [2023-12-28T00:42:07.570Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:42:07.570Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:42:07.570Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:42:07.578Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:42:07.578Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:42:07.579Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:42:07.578Z"],"workRunningCount":1}
[debug] [2023-12-28T00:42:07.579Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:42:07.582Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:42:07.583Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:42:07.584Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:42:07.584Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[debug] [2023-12-28T00:42:08.186Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 601.5745ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 601.5745ms"}}
[debug] [2023-12-28T00:42:08.186Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: IDLE"}}
[debug] [2023-12-28T00:42:08.186Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:42:08.186Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:42:08.186Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:58:14.342Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:58:15.366Z] Validating nodejs source
[debug] [2023-12-28T00:58:17.470Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T00:58:17.470Z] Building nodejs source
[debug] [2023-12-28T00:58:17.470Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T00:58:17.473Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T00:58:17.477Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8537

[debug] [2023-12-28T00:58:18.001Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:58:18.672Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T00:58:18.672Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T00:58:18.672Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:58:18.802Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T00:58:18.842Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:58:18.842Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: FINISHING"}}
[debug] [2023-12-28T00:58:18.855Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: exited"}}
[debug] [2023-12-28T00:58:18.855Z] [worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-f36c1d2f-90f4-40f9-ac0f-fc9e2b6bf29f]: FINISHED"}}
[debug] [2023-12-28T00:58:19.680Z] Validating nodejs source
[debug] [2023-12-28T00:58:20.511Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T00:58:20.511Z] Building nodejs source
[debug] [2023-12-28T00:58:20.511Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T00:58:20.514Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T00:58:20.518Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8130

[debug] [2023-12-28T00:58:21.300Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T00:58:47.851Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:58:48.865Z] Validating nodejs source
[debug] [2023-12-28T00:58:49.775Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T00:58:49.776Z] Building nodejs source
[debug] [2023-12-28T00:58:49.776Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T00:58:49.778Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T00:58:49.781Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8790

[debug] [2023-12-28T00:58:51.074Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T00:58:56.718Z] Dec 27, 2023 4:58:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:58:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T00:58:56.752Z] Dec 27, 2023 4:58:56 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:58:56 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T00:58:56.753Z] Dec 27, 2023 4:58:56 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 4:58:56 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T00:59:06.339Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:59:06.339Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:59:06.345Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:59:06.339Z"],"workRunningCount":1}
[debug] [2023-12-28T00:59:06.346Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:59:06.371Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:59:06.373Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:59:06.373Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T00:59:06.385Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:59:06.385Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T00:59:07.585Z] [runtime-status] [63716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:59:07.586Z] [runtime-status] [63716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:59:07.586Z] [runtime-status] [63716] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T00:59:07.587Z] [runtime-status] [63716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:59:07.755Z] [runtime-status] [63716] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T00:59:07.755Z] [runtime-status] [63716] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T00:59:07.755Z] [runtime-status] [63716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:59:07.756Z] [runtime-status] [63716] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T00:59:07.757Z] [runtime-status] [63716] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T00:59:07.757Z] [runtime-status] [63716] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T00:59:07.759Z] [runtime-status] [63716] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T00:59:08.220Z] [runtime-status] [63716] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T00:59:08.221Z] [runtime-status] [63716] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_dfa83bc13829c2cb.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [63716] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_dfa83bc13829c2cb.sock"}}
[debug] [2023-12-28T00:59:08.230Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: IDLE"}}
[debug] [2023-12-28T00:59:08.230Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:59:08.232Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: BUSY"}}
[debug] [2023-12-28T00:59:08.238Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 6.32475ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 6.32475ms"}}
[debug] [2023-12-28T00:59:08.238Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: IDLE"}}
[debug] [2023-12-28T00:59:08.238Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:59:08.238Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:59:08.239Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:59:08.246Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:59:08.246Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:59:08.247Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T00:59:08.246Z"],"workRunningCount":1}
[debug] [2023-12-28T00:59:08.247Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T00:59:08.251Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T00:59:08.253Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T00:59:08.253Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T00:59:08.254Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[info] >  authData 0x49960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97635d00000000000000000000000000000000000000000014b9580372e097e42775c4f615b988d51da5cf80dea5010203262001215820bea4a8f16820c968e80e1336a9271835e1415e1c4e2deaa3b7af0329fa0c3e5c2258204dacc69436eb6ef5b4b43f9d6f876bff8ac85023e4395485cb692f8339e7b003 {"user":"authData 0x49960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97635d00000000000000000000000000000000000000000014b9580372e097e42775c4f615b988d51da5cf80dea5010203262001215820bea4a8f16820c968e80e1336a9271835e1415e1c4e2deaa3b7af0329fa0c3e5c2258204dacc69436eb6ef5b4b43f9d6f876bff8ac85023e4395485cb692f8339e7b003","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m authData 0x49960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97635d00000000000000000000000000000000000000000014b9580372e097e42775c4f615b988d51da5cf80dea5010203262001215820bea4a8f16820c968e80e1336a9271835e1415e1c4e2deaa3b7af0329fa0c3e5c2258204dacc69436eb6ef5b4b43f9d6f876bff8ac85023e4395485cb692f8339e7b003"}}
[debug] [2023-12-28T00:59:09.070Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 817.069125ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 817.069125ms"}}
[debug] [2023-12-28T00:59:09.071Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: IDLE"}}
[debug] [2023-12-28T00:59:09.071Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T00:59:09.071Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T00:59:09.071Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T00:59:38.758Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T00:59:39.769Z] Validating nodejs source
[debug] [2023-12-28T00:59:40.672Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T00:59:40.673Z] Building nodejs source
[debug] [2023-12-28T00:59:40.673Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T00:59:40.675Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T00:59:40.678Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8478

[debug] [2023-12-28T00:59:41.781Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T00:59:41.811Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T00:59:41.812Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: FINISHING"}}
[debug] [2023-12-28T00:59:41.827Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: exited"}}
[debug] [2023-12-28T00:59:41.827Z] [worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4986ad63-84a8-4182-b24c-3584741ac5e0]: FINISHED"}}
[debug] [2023-12-28T01:01:50.665Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:01:51.423Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:01:51.424Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:01:51.424Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:01:52.434Z] Validating nodejs source
[debug] [2023-12-28T01:01:53.301Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:01:53.301Z] Building nodejs source
[debug] [2023-12-28T01:01:53.301Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:01:53.303Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:01:53.307Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8739

[debug] [2023-12-28T01:01:54.444Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:01:56.366Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:01:57.379Z] Validating nodejs source
[debug] [2023-12-28T01:01:58.383Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:01:58.383Z] Building nodejs source
[debug] [2023-12-28T01:01:58.383Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:01:58.387Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:01:58.389Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8975

[debug] [2023-12-28T01:01:59.123Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:02:21.017Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:02:21.837Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:02:21.837Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:02:21.837Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:02:22.847Z] Validating nodejs source
[debug] [2023-12-28T01:02:23.729Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:02:23.729Z] Building nodejs source
[debug] [2023-12-28T01:02:23.729Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:02:23.732Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:02:23.733Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8656

[error] ReferenceError: signedData is not defined
    at Object.<anonymous> (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:331:13)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/index.js:28:27)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)

[debug] [2023-12-28T01:02:24.737Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: signedData is not defined
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2023-12-28T01:02:26.036Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:02:26.705Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:02:26.706Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:02:26.706Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:02:27.722Z] Validating nodejs source
[debug] [2023-12-28T01:02:28.455Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:02:28.455Z] Building nodejs source
[debug] [2023-12-28T01:02:28.455Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:02:28.457Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:02:28.460Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8312

[debug] [2023-12-28T01:02:29.226Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:03:03.588Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:03:04.158Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:03:04.159Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:03:04.159Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:03:05.198Z] Validating nodejs source
[debug] [2023-12-28T01:03:06.129Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:03:06.129Z] Building nodejs source
[debug] [2023-12-28T01:03:06.129Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:03:06.132Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:03:06.135Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8081

[error] /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:326
    ]), clientDataHash;
        ^

SyntaxError: Identifier 'clientDataHash' has already been declared
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/index.js:28:27)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2023-12-28T01:03:06.462Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Identifier 'clientDataHash' has already been declared
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2023-12-28T01:03:07.624Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:03:08.176Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:03:08.176Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:03:08.177Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:03:09.195Z] Validating nodejs source
[debug] [2023-12-28T01:03:10.282Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:03:10.282Z] Building nodejs source
[debug] [2023-12-28T01:03:10.283Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:03:10.287Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:03:10.291Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8419

[debug] [2023-12-28T01:03:11.359Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:04:49.382Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:04:49.973Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:04:49.973Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:04:49.973Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:04:50.977Z] Validating nodejs source
[debug] [2023-12-28T01:04:51.891Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:04:51.892Z] Building nodejs source
[debug] [2023-12-28T01:04:51.892Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:04:51.893Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:04:51.895Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8222

[debug] [2023-12-28T01:04:52.960Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:04:53.065Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:04:53.538Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:04:53.538Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:04:53.539Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:04:54.554Z] Validating nodejs source
[debug] [2023-12-28T01:04:55.315Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:04:55.315Z] Building nodejs source
[debug] [2023-12-28T01:04:55.315Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:04:55.319Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:04:55.323Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8119

[debug] [2023-12-28T01:04:56.105Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:05:12.631Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:05:13.258Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:05:13.258Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:05:13.258Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:05:14.282Z] Validating nodejs source
[debug] [2023-12-28T01:05:15.298Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:05:15.299Z] Building nodejs source
[debug] [2023-12-28T01:05:15.299Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:05:15.301Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:05:15.302Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8948

[debug] [2023-12-28T01:05:16.457Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:05:20.185Z] Dec 27, 2023 5:05:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 5:05:20 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T01:05:20.214Z] Dec 27, 2023 5:05:20 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 5:05:20 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T01:05:20.217Z] Dec 27, 2023 5:05:20 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 5:05:20 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T01:05:28.636Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:05:28.636Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:05:28.640Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:05:28.636Z"],"workRunningCount":1}
[debug] [2023-12-28T01:05:28.641Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T01:05:28.662Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T01:05:28.664Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T01:05:28.664Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T01:05:28.675Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T01:05:28.676Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T01:05:29.830Z] [runtime-status] [67144] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T01:05:29.830Z] [runtime-status] [67144] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:05:29.830Z] [runtime-status] [67144] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T01:05:29.831Z] [runtime-status] [67144] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:05:30.038Z] [runtime-status] [67144] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T01:05:30.039Z] [runtime-status] [67144] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T01:05:30.039Z] [runtime-status] [67144] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:05:30.040Z] [runtime-status] [67144] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T01:05:30.041Z] [runtime-status] [67144] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:05:30.041Z] [runtime-status] [67144] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T01:05:30.043Z] [runtime-status] [67144] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T01:05:30.500Z] [runtime-status] [67144] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T01:05:30.500Z] [runtime-status] [67144] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_1fa9f5cad8efb5ed.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [67144] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_1fa9f5cad8efb5ed.sock"}}
[debug] [2023-12-28T01:05:30.536Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: IDLE"}}
[debug] [2023-12-28T01:05:30.536Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T01:05:30.537Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: BUSY"}}
[debug] [2023-12-28T01:05:30.545Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 7.914542ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 7.914542ms"}}
[debug] [2023-12-28T01:05:30.546Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: IDLE"}}
[debug] [2023-12-28T01:05:30.546Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T01:05:30.546Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T01:05:30.546Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:05:30.555Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:05:30.555Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:05:30.555Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:05:30.555Z"],"workRunningCount":1}
[debug] [2023-12-28T01:05:30.555Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T01:05:30.568Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T01:05:30.570Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T01:05:30.573Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T01:05:30.573Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[info] >  5 {"user":5,"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m 5"}}
[debug] [2023-12-28T01:05:31.255Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 682.070583ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 682.070583ms"}}
[debug] [2023-12-28T01:05:31.257Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: IDLE"}}
[debug] [2023-12-28T01:05:31.257Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T01:05:31.257Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T01:05:31.257Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:06:45.618Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:06:46.174Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:06:46.174Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:06:46.174Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:06:47.183Z] Validating nodejs source
[debug] [2023-12-28T01:06:48.213Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:06:48.214Z] Building nodejs source
[debug] [2023-12-28T01:06:48.215Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:06:48.220Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:06:48.225Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8801

[debug] [2023-12-28T01:06:49.314Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:06:49.346Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T01:06:49.347Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: FINISHING"}}
[debug] [2023-12-28T01:06:49.362Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: exited"}}
[debug] [2023-12-28T01:06:49.363Z] [worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-49386819-f413-4cf4-85a0-9fbcd79141c6]: FINISHED"}}
[debug] [2023-12-28T01:08:34.114Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:08:35.144Z] Validating nodejs source
[debug] [2023-12-28T01:08:36.065Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:08:36.066Z] Building nodejs source
[debug] [2023-12-28T01:08:36.067Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:08:36.071Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:08:36.076Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8455

[debug] [2023-12-28T01:08:37.092Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:08:57.337Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:08:58.361Z] Validating nodejs source
[debug] [2023-12-28T01:08:59.188Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:08:59.189Z] Building nodejs source
[debug] [2023-12-28T01:08:59.189Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:08:59.194Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:08:59.198Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8983

[debug] [2023-12-28T01:09:00.202Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:09:39.964Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:09:40.984Z] Validating nodejs source
[debug] [2023-12-28T01:09:41.896Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:09:41.896Z] Building nodejs source
[debug] [2023-12-28T01:09:41.896Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:09:41.900Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:09:41.904Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8132

[debug] [2023-12-28T01:09:43.085Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:10:26.525Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:10:27.120Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:10:27.120Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:10:27.120Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:10:28.137Z] Validating nodejs source
[debug] [2023-12-28T01:10:29.032Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:10:29.032Z] Building nodejs source
[debug] [2023-12-28T01:10:29.033Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:10:29.036Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:10:29.041Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8973

[debug] [2023-12-28T01:10:30.115Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:11:03.912Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:11:04.616Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:11:04.616Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:11:04.616Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:11:05.634Z] Validating nodejs source
[debug] [2023-12-28T01:11:06.474Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:11:06.474Z] Building nodejs source
[debug] [2023-12-28T01:11:06.474Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:11:06.478Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:11:06.482Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8001

[error] /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:325
        (0, utils_1.toBuffer)(authData).,
                                        ^

SyntaxError: Unexpected token ','
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1178:20)
    at Module._compile (node:internal/modules/cjs/loader:1220:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/index.js:28:27)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)

[debug] [2023-12-28T01:11:06.809Z] Got response code 400; body Failed to generate manifest from function source: SyntaxError: Unexpected token ','
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2023-12-28T01:12:35.997Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:12:36.358Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:12:36.359Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:12:36.359Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:12:37.377Z] Validating nodejs source
[debug] [2023-12-28T01:12:38.277Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:12:38.277Z] Building nodejs source
[debug] [2023-12-28T01:12:38.278Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:12:38.283Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:12:38.287Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8187

[debug] [2023-12-28T01:12:39.263Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:14:53.980Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:14:54.998Z] Validating nodejs source
[debug] [2023-12-28T01:14:55.899Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:14:55.900Z] Building nodejs source
[debug] [2023-12-28T01:14:55.900Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:14:55.904Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:14:55.909Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8081

[debug] [2023-12-28T01:14:56.958Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:16:06.111Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:16:07.128Z] Validating nodejs source
[debug] [2023-12-28T01:16:07.960Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:16:07.960Z] Building nodejs source
[debug] [2023-12-28T01:16:07.961Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:16:07.965Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:16:07.970Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8073

[debug] [2023-12-28T01:16:08.955Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:16:13.748Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:16:14.349Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:16:14.349Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:16:14.449Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:16:15.467Z] Validating nodejs source
[debug] [2023-12-28T01:16:16.337Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:16:16.337Z] Building nodejs source
[debug] [2023-12-28T01:16:16.338Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:16:16.341Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:16:16.345Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8044

[debug] [2023-12-28T01:16:17.368Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:16:37.668Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:16:38.482Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:16:38.483Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:16:38.483Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:16:39.503Z] Validating nodejs source
[debug] [2023-12-28T01:16:40.435Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:16:40.435Z] Building nodejs source
[debug] [2023-12-28T01:16:40.436Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:16:40.439Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:16:40.443Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8463

[debug] [2023-12-28T01:16:41.430Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:16:44.797Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:16:45.398Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:16:45.398Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:16:45.399Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:16:46.412Z] Validating nodejs source
[debug] [2023-12-28T01:16:47.333Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:16:47.334Z] Building nodejs source
[debug] [2023-12-28T01:16:47.334Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:16:47.337Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:16:47.340Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8555

[debug] [2023-12-28T01:16:48.428Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:17:17.595Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:18.223Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:17:18.224Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:17:18.224Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:19.237Z] Validating nodejs source
[debug] [2023-12-28T01:17:20.084Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:17:20.085Z] Building nodejs source
[debug] [2023-12-28T01:17:20.086Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:17:20.091Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:17:20.098Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8650

[debug] [2023-12-28T01:17:21.102Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:17:26.549Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:26.914Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:17:26.914Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:17:26.914Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:27.923Z] Validating nodejs source
[debug] [2023-12-28T01:17:28.793Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:17:28.793Z] Building nodejs source
[debug] [2023-12-28T01:17:28.794Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:17:28.797Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:17:28.801Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8687

[debug] [2023-12-28T01:17:29.775Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:17:30.547Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:31.232Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:17:31.232Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:17:31.232Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:32.242Z] Validating nodejs source
[debug] [2023-12-28T01:17:32.984Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:17:32.984Z] Building nodejs source
[debug] [2023-12-28T01:17:32.985Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:17:32.987Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:32.987Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:17:32.987Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:17:32.987Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:32.988Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:17:32.991Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8938

[debug] [2023-12-28T01:17:33.783Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:17:33.994Z] Validating nodejs source
[debug] [2023-12-28T01:17:34.730Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:17:34.730Z] Building nodejs source
[debug] [2023-12-28T01:17:34.731Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:17:34.734Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:17:34.737Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8828

[debug] [2023-12-28T01:17:35.490Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:17:38.007Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:38.462Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:17:38.462Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:17:38.462Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:17:39.469Z] Validating nodejs source
[debug] [2023-12-28T01:17:40.254Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:17:40.254Z] Building nodejs source
[debug] [2023-12-28T01:17:40.255Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:17:40.256Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:17:40.258Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8136

[debug] [2023-12-28T01:17:41.052Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:18:12.802Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:18:13.334Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:18:13.335Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:18:13.335Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:18:14.354Z] Validating nodejs source
[debug] [2023-12-28T01:18:15.418Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:18:15.419Z] Building nodejs source
[debug] [2023-12-28T01:18:15.419Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:18:15.424Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:18:15.429Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8594

[debug] [2023-12-28T01:18:16.539Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:18:18.728Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:18:19.250Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:18:19.251Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:18:19.251Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:18:20.260Z] Validating nodejs source
[debug] [2023-12-28T01:18:21.139Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:18:21.139Z] Building nodejs source
[debug] [2023-12-28T01:18:21.139Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:18:21.142Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:18:21.145Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8533

[debug] [2023-12-28T01:18:22.085Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:18:31.270Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:18:31.631Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:18:31.631Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:18:31.631Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:18:32.645Z] Validating nodejs source
[debug] [2023-12-28T01:18:33.530Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:18:33.530Z] Building nodejs source
[debug] [2023-12-28T01:18:33.530Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:18:33.533Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:18:33.537Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8387

[debug] [2023-12-28T01:18:34.608Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:18:48.616Z] Dec 27, 2023 5:18:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 5:18:48 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T01:18:48.640Z] Dec 27, 2023 5:18:48 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 5:18:48 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T01:18:48.641Z] Dec 27, 2023 5:18:48 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 5:18:48 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T01:18:57.902Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:18:57.898Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:18:57.903Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:18:57.898Z"],"workRunningCount":1}
[debug] [2023-12-28T01:18:57.904Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T01:18:57.933Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T01:18:57.935Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T01:18:57.935Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T01:18:57.947Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T01:18:57.948Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T01:18:59.126Z] [runtime-status] [74292] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T01:18:59.127Z] [runtime-status] [74292] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:18:59.127Z] [runtime-status] [74292] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T01:18:59.129Z] [runtime-status] [74292] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:18:59.300Z] [runtime-status] [74292] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T01:18:59.301Z] [runtime-status] [74292] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T01:18:59.301Z] [runtime-status] [74292] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:18:59.302Z] [runtime-status] [74292] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T01:18:59.303Z] [runtime-status] [74292] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T01:18:59.303Z] [runtime-status] [74292] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T01:18:59.305Z] [runtime-status] [74292] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T01:18:59.755Z] [runtime-status] [74292] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T01:18:59.756Z] [runtime-status] [74292] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_dbf0c82eab2586c3.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [74292] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_dbf0c82eab2586c3.sock"}}
[debug] [2023-12-28T01:18:59.791Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: IDLE"}}
[debug] [2023-12-28T01:18:59.792Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T01:18:59.793Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: BUSY"}}
[debug] [2023-12-28T01:18:59.800Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 8.131958ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 8.131958ms"}}
[debug] [2023-12-28T01:18:59.802Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: IDLE"}}
[debug] [2023-12-28T01:18:59.802Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T01:18:59.802Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T01:18:59.802Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:18:59.806Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:18:59.806Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:18:59.806Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T01:18:59.806Z"],"workRunningCount":1}
[debug] [2023-12-28T01:18:59.806Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T01:18:59.810Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T01:18:59.811Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T01:18:59.811Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T01:18:59.811Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[debug] [2023-12-28T01:19:00.457Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 645.857333ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 645.857333ms"}}
[debug] [2023-12-28T01:19:00.457Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: IDLE"}}
[debug] [2023-12-28T01:19:00.457Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T01:19:00.457Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T01:19:00.458Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T01:20:26.209Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:20:26.294Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:20:27.315Z] Validating nodejs source
[debug] [2023-12-28T01:20:28.265Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:20:28.266Z] Building nodejs source
[debug] [2023-12-28T01:20:28.266Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:20:28.269Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:20:28.272Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8487

[debug] [2023-12-28T01:20:29.528Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:20:29.561Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T01:20:29.561Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: FINISHING"}}
[debug] [2023-12-28T01:20:29.575Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: exited"}}
[debug] [2023-12-28T01:20:29.575Z] [worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-ff10272f-4af3-4df9-ac23-4fbd50d5f7d6]: FINISHED"}}
[debug] [2023-12-28T01:20:34.025Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:20:35.039Z] Validating nodejs source
[debug] [2023-12-28T01:20:35.885Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:20:35.886Z] Building nodejs source
[debug] [2023-12-28T01:20:35.886Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:20:35.888Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:20:35.892Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T01:20:36.017Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[info] Serving at port 8305

[debug] [2023-12-28T01:20:36.900Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:20:37.023Z] Validating nodejs source
[debug] [2023-12-28T01:20:37.762Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:20:37.762Z] Building nodejs source
[debug] [2023-12-28T01:20:37.763Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:20:37.765Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:20:37.768Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8595

[debug] [2023-12-28T01:20:38.566Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:21:02.626Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:03.000Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:21:03.000Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:21:03.000Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:04.017Z] Validating nodejs source
[debug] [2023-12-28T01:21:05.084Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:21:05.084Z] Building nodejs source
[debug] [2023-12-28T01:21:05.085Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:21:05.088Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:21:05.093Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8519

[debug] [2023-12-28T01:21:05.397Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:05.826Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:21:05.827Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:21:05.827Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:06.405Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:21:06.837Z] Validating nodejs source
[debug] [2023-12-28T01:21:07.609Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:21:07.610Z] Building nodejs source
[debug] [2023-12-28T01:21:07.610Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:21:07.613Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:21:07.618Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8953

[debug] [2023-12-28T01:21:08.426Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:21:21.616Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:22.349Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:21:22.349Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:21:22.349Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:23.358Z] Validating nodejs source
[debug] [2023-12-28T01:21:24.168Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:21:24.169Z] Building nodejs source
[debug] [2023-12-28T01:21:24.169Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:21:24.170Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:21:24.171Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8661

[debug] [2023-12-28T01:21:25.095Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:21:26.852Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:27.532Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:21:27.535Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:21:27.536Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:21:28.555Z] Validating nodejs source
[debug] [2023-12-28T01:21:29.456Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:21:29.457Z] Building nodejs source
[debug] [2023-12-28T01:21:29.457Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:21:29.461Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:21:29.466Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8247

[debug] [2023-12-28T01:21:30.464Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:22:13.159Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:22:14.179Z] Validating nodejs source
[debug] [2023-12-28T01:22:15.070Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:22:15.071Z] Building nodejs source
[debug] [2023-12-28T01:22:15.071Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:22:15.075Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:22:15.078Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8549

[debug] [2023-12-28T01:22:16.139Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:22:22.606Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:22:23.620Z] Validating nodejs source
[debug] [2023-12-28T01:22:24.444Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:22:24.444Z] Building nodejs source
[debug] [2023-12-28T01:22:24.445Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:22:24.449Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:22:24.452Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8509

[debug] [2023-12-28T01:22:25.516Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:22:37.827Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:22:37.935Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:22:37.935Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T01:22:37.935Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:22:38.948Z] Validating nodejs source
[debug] [2023-12-28T01:22:39.837Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:22:39.837Z] Building nodejs source
[debug] [2023-12-28T01:22:39.838Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:22:39.841Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:22:39.844Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T01:22:40.073Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[info] Serving at port 8539

[debug] [2023-12-28T01:22:40.929Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:22:41.079Z] Validating nodejs source
[debug] [2023-12-28T01:22:41.812Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:22:41.812Z] Building nodejs source
[debug] [2023-12-28T01:22:41.813Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:22:41.816Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:22:41.817Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:22:41.820Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8523

[debug] [2023-12-28T01:22:42.593Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:22:42.819Z] Validating nodejs source
[debug] [2023-12-28T01:22:43.580Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:22:43.581Z] Building nodejs source
[debug] [2023-12-28T01:22:43.581Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:22:43.581Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:22:43.582Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8359

[debug] [2023-12-28T01:22:44.346Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:22:48.005Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:22:49.021Z] Validating nodejs source
[debug] [2023-12-28T01:22:49.800Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:22:49.801Z] Building nodejs source
[debug] [2023-12-28T01:22:49.801Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:22:49.812Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:22:49.815Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8983

[debug] [2023-12-28T01:22:50.619Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:23:00.018Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:23:01.029Z] Validating nodejs source
[debug] [2023-12-28T01:23:02.016Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:23:02.016Z] Building nodejs source
[debug] [2023-12-28T01:23:02.016Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:23:02.018Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:23:02.020Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8350

[debug] [2023-12-28T01:23:03.070Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:23:06.239Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:23:07.243Z] Validating nodejs source
[debug] [2023-12-28T01:23:08.283Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:23:08.284Z] Building nodejs source
[debug] [2023-12-28T01:23:08.284Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:23:08.285Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:23:08.286Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8031

[debug] [2023-12-28T01:23:09.252Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:23:31.256Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:23:32.278Z] Validating nodejs source
[debug] [2023-12-28T01:23:33.126Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:23:33.126Z] Building nodejs source
[debug] [2023-12-28T01:23:33.127Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:23:33.130Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:23:33.130Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:23:33.134Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8533

[debug] [2023-12-28T01:23:34.134Z] Validating nodejs source
[debug] [2023-12-28T01:23:34.856Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:23:34.858Z] Building nodejs source
[debug] [2023-12-28T01:23:34.858Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:23:34.863Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:23:34.867Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T01:23:34.879Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[info] Serving at port 8642

[debug] [2023-12-28T01:23:35.697Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:23:52.935Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:23:53.944Z] Validating nodejs source
[debug] [2023-12-28T01:23:54.836Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:23:54.836Z] Building nodejs source
[debug] [2023-12-28T01:23:54.836Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:23:54.837Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:23:54.839Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8919

[debug] [2023-12-28T01:23:55.999Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:24:02.303Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:24:03.315Z] Validating nodejs source
[debug] [2023-12-28T01:24:04.149Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:24:04.150Z] Building nodejs source
[debug] [2023-12-28T01:24:04.150Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:24:04.153Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:24:04.156Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8532

[debug] [2023-12-28T01:24:05.431Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:24:07.832Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:24:08.849Z] Validating nodejs source
[debug] [2023-12-28T01:24:09.723Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:24:09.723Z] Building nodejs source
[debug] [2023-12-28T01:24:09.723Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:24:09.727Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:24:09.730Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8611

[debug] [2023-12-28T01:24:10.716Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:24:22.023Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:24:22.592Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:24:23.607Z] Validating nodejs source
[debug] [2023-12-28T01:24:24.456Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:24:24.457Z] Building nodejs source
[debug] [2023-12-28T01:24:24.457Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:24:24.460Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:24:24.463Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8577

[debug] [2023-12-28T01:24:25.443Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:24:29.464Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:24:30.481Z] Validating nodejs source
[debug] [2023-12-28T01:24:31.397Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:24:31.399Z] Building nodejs source
[debug] [2023-12-28T01:24:31.399Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:24:31.402Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:24:31.406Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8791

[debug] [2023-12-28T01:24:32.444Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:24:55.132Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:24:56.155Z] Validating nodejs source
[debug] [2023-12-28T01:24:57.043Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:24:57.044Z] Building nodejs source
[debug] [2023-12-28T01:24:57.044Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:24:57.048Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:24:57.051Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8038

[debug] [2023-12-28T01:24:58.195Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:24:59.454Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:25:00.463Z] Validating nodejs source
[debug] [2023-12-28T01:25:01.976Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:25:01.976Z] Building nodejs source
[debug] [2023-12-28T01:25:01.977Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:25:01.979Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:25:01.983Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8488

[debug] [2023-12-28T01:25:02.762Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:26:51.312Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers"}}
[debug] [2023-12-28T01:26:52.324Z] Validating nodejs source
[debug] [2023-12-28T01:26:53.313Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:26:53.314Z] Building nodejs source
[debug] [2023-12-28T01:26:53.314Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:26:53.316Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:26:53.318Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8402

[error] ReferenceError: exports is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/index.js:25:23
    at ModuleJob.run (node:internal/modules/esm/module_job:194:25)

[debug] [2023-12-28T01:26:53.666Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: exports is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2023-12-28T01:26:56.031Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers"}}
[debug] [2023-12-28T01:26:57.045Z] Validating nodejs source
[debug] [2023-12-28T01:26:57.811Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "type": "module",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:26:57.811Z] Building nodejs source
[debug] [2023-12-28T01:26:57.812Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:26:57.814Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:26:57.817Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8531

[error] ReferenceError: exports is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
    at file:///Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/index.js:25:23
    at ModuleJob.run (node:internal/modules/esm/module_job:194:25)

[debug] [2023-12-28T01:26:58.092Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: exports is not defined in ES module scope
This file is being treated as an ES module because it has a '.js' file extension and '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json' contains "type": "module". To treat it as a CommonJS script, rename it to use the '.cjs' file extension.
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2023-12-28T01:30:06.229Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers"}}
[debug] [2023-12-28T01:30:07.247Z] Validating nodejs source
[debug] [2023-12-28T01:30:08.254Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:30:08.254Z] Building nodejs source
[debug] [2023-12-28T01:30:08.254Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:30:08.256Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:30:08.257Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8635

[debug] [2023-12-28T01:30:09.298Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:30:42.335Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:30:43.356Z] Validating nodejs source
[debug] [2023-12-28T01:30:44.274Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:30:44.274Z] Building nodejs source
[debug] [2023-12-28T01:30:44.274Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:30:44.278Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:30:44.284Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8620

[debug] [2023-12-28T01:30:45.383Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:31:00.078Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:31:01.089Z] Validating nodejs source
[debug] [2023-12-28T01:31:01.953Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:31:01.953Z] Building nodejs source
[debug] [2023-12-28T01:31:01.954Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:31:01.956Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:31:01.959Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8831

[debug] [2023-12-28T01:31:03.081Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:31:07.204Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:31:08.217Z] Validating nodejs source
[debug] [2023-12-28T01:31:09.037Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:31:09.037Z] Building nodejs source
[debug] [2023-12-28T01:31:09.037Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:31:09.040Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:31:09.042Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8892

[debug] [2023-12-28T01:31:10.125Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:31:14.450Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:31:15.468Z] Validating nodejs source
[debug] [2023-12-28T01:31:16.308Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:31:16.308Z] Building nodejs source
[debug] [2023-12-28T01:31:16.308Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:31:16.311Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:31:16.314Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8520

[debug] [2023-12-28T01:31:17.398Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:31:17.709Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:31:18.721Z] Validating nodejs source
[debug] [2023-12-28T01:31:19.631Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:31:19.632Z] Building nodejs source
[debug] [2023-12-28T01:31:19.632Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:31:19.638Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:31:19.642Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8639

[debug] [2023-12-28T01:31:20.548Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:31:21.727Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:31:22.443Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:31:23.448Z] Validating nodejs source
[debug] [2023-12-28T01:31:24.220Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:31:24.221Z] Building nodejs source
[debug] [2023-12-28T01:31:24.221Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:31:24.221Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:31:24.222Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8424

[debug] [2023-12-28T01:31:24.996Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:31:45.928Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:31:46.953Z] Validating nodejs source
[debug] [2023-12-28T01:31:48.022Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:31:48.022Z] Building nodejs source
[debug] [2023-12-28T01:31:48.023Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:31:48.026Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:31:48.030Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8692

[debug] [2023-12-28T01:31:49.212Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:32:14.016Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:32:15.032Z] Validating nodejs source
[debug] [2023-12-28T01:32:16.068Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:32:16.068Z] Building nodejs source
[debug] [2023-12-28T01:32:16.069Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:32:16.076Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:32:16.079Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8975

[debug] [2023-12-28T01:32:17.083Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:32:23.969Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:32:24.983Z] Validating nodejs source
[debug] [2023-12-28T01:32:25.866Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:32:25.867Z] Building nodejs source
[debug] [2023-12-28T01:32:25.867Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:32:25.870Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:32:25.873Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8936

[debug] [2023-12-28T01:32:26.311Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:32:26.903Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:32:27.326Z] Validating nodejs source
[debug] [2023-12-28T01:32:28.087Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:32:28.088Z] Building nodejs source
[debug] [2023-12-28T01:32:28.089Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:32:28.091Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:32:28.094Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8322

[debug] [2023-12-28T01:32:28.838Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:32:51.908Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:32:52.931Z] Validating nodejs source
[debug] [2023-12-28T01:32:53.846Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:32:53.847Z] Building nodejs source
[debug] [2023-12-28T01:32:53.847Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:32:53.851Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:32:53.855Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8954

[debug] [2023-12-28T01:32:54.967Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:33:09.633Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:33:10.507Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:33:10.601Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:33:11.621Z] Validating nodejs source
[debug] [2023-12-28T01:33:12.496Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:33:12.496Z] Building nodejs source
[debug] [2023-12-28T01:33:12.497Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:33:12.501Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:33:12.505Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8287

[debug] [2023-12-28T01:33:13.466Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:42:14.087Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers"}}
[debug] [2023-12-28T01:42:14.209Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers"}}
[debug] [2023-12-28T01:42:15.228Z] Validating nodejs source
[debug] [2023-12-28T01:42:16.078Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:42:16.078Z] Building nodejs source
[debug] [2023-12-28T01:42:16.079Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:42:16.085Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:42:16.089Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8399

[debug] [2023-12-28T01:42:17.195Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:42:35.641Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:42:36.661Z] Validating nodejs source
[debug] [2023-12-28T01:42:37.646Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:42:37.647Z] Building nodejs source
[debug] [2023-12-28T01:42:37.648Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:42:37.655Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:42:37.665Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8597

[debug] [2023-12-28T01:42:38.748Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:42:52.630Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:42:53.648Z] Validating nodejs source
[debug] [2023-12-28T01:42:54.467Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:42:54.468Z] Building nodejs source
[debug] [2023-12-28T01:42:54.468Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:42:54.472Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:42:54.476Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8797

[debug] [2023-12-28T01:42:55.535Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:43:10.267Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:43:11.288Z] Validating nodejs source
[debug] [2023-12-28T01:43:12.124Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:43:12.125Z] Building nodejs source
[debug] [2023-12-28T01:43:12.125Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:43:12.129Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:43:12.134Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8995

[debug] [2023-12-28T01:43:13.161Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:43:29.071Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:43:30.092Z] Validating nodejs source
[debug] [2023-12-28T01:43:30.904Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:43:30.905Z] Building nodejs source
[debug] [2023-12-28T01:43:30.906Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:43:30.909Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:43:30.914Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8388

[debug] [2023-12-28T01:43:32.051Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:43:35.266Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:43:36.276Z] Validating nodejs source
[debug] [2023-12-28T01:43:37.131Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:43:37.132Z] Building nodejs source
[debug] [2023-12-28T01:43:37.132Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:43:37.135Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:43:37.139Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8146

[debug] [2023-12-28T01:43:38.077Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:43:58.094Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:43:59.114Z] Validating nodejs source
[debug] [2023-12-28T01:44:00.004Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:44:00.004Z] Building nodejs source
[debug] [2023-12-28T01:44:00.005Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:44:00.012Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:44:00.019Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8813

[debug] [2023-12-28T01:44:01.175Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:44:04.957Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:44:05.971Z] Validating nodejs source
[debug] [2023-12-28T01:44:06.763Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:44:06.763Z] Building nodejs source
[debug] [2023-12-28T01:44:06.764Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:44:06.766Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:44:06.770Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8597

[debug] [2023-12-28T01:44:07.703Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:44:40.091Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:44:41.117Z] Validating nodejs source
[debug] [2023-12-28T01:44:42.073Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:44:42.073Z] Building nodejs source
[debug] [2023-12-28T01:44:42.074Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:44:42.078Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:44:42.083Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8934

[debug] [2023-12-28T01:44:43.506Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:44:56.347Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers"}}
[debug] [2023-12-28T01:44:57.381Z] Validating nodejs source
[debug] [2023-12-28T01:44:58.163Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:44:58.163Z] Building nodejs source
[debug] [2023-12-28T01:44:58.164Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:44:58.167Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:44:58.171Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8106

[debug] [2023-12-28T01:44:59.111Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:45:14.917Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:45:15.945Z] Validating nodejs source
[debug] [2023-12-28T01:45:16.926Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:45:16.927Z] Building nodejs source
[debug] [2023-12-28T01:45:16.928Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:45:16.932Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:45:16.933Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:45:16.939Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8508

[debug] [2023-12-28T01:45:17.938Z] Validating nodejs source
[debug] [2023-12-28T01:45:18.700Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:45:18.701Z] Building nodejs source
[debug] [2023-12-28T01:45:18.702Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:45:18.705Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:45:18.709Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T01:45:18.717Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[info] Serving at port 8277

[debug] [2023-12-28T01:45:19.512Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:48:21.766Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:48:22.777Z] Validating nodejs source
[debug] [2023-12-28T01:48:23.732Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:48:23.733Z] Building nodejs source
[debug] [2023-12-28T01:48:23.733Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:48:23.735Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:48:23.737Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8785

[debug] [2023-12-28T01:48:24.843Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:48:43.806Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:48:44.826Z] Validating nodejs source
[debug] [2023-12-28T01:48:45.742Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:48:45.742Z] Building nodejs source
[debug] [2023-12-28T01:48:45.743Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:48:45.748Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:48:45.752Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8575

[debug] [2023-12-28T01:48:46.862Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:51:47.463Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:51:48.485Z] Validating nodejs source
[debug] [2023-12-28T01:51:49.412Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:51:49.412Z] Building nodejs source
[debug] [2023-12-28T01:51:49.413Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:51:49.417Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:51:49.421Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8963

[debug] [2023-12-28T01:51:50.528Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:52:16.659Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:52:17.460Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:52:17.460Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers"}}
[debug] [2023-12-28T01:52:17.461Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:52:18.477Z] Validating nodejs source
[debug] [2023-12-28T01:52:19.450Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:52:19.450Z] Building nodejs source
[debug] [2023-12-28T01:52:19.450Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:52:19.454Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:52:19.458Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8411

[debug] [2023-12-28T01:52:20.656Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:52:52.675Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:52:53.705Z] Validating nodejs source
[debug] [2023-12-28T01:52:54.689Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:52:54.689Z] Building nodejs source
[debug] [2023-12-28T01:52:54.690Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:52:54.693Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:52:54.698Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8856

[debug] [2023-12-28T01:52:55.399Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:52:55.775Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:52:56.417Z] Validating nodejs source
[debug] [2023-12-28T01:52:57.260Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:52:57.260Z] Building nodejs source
[debug] [2023-12-28T01:52:57.261Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:52:57.265Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:52:57.270Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T01:52:57.273Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[info] Serving at port 8481

[debug] [2023-12-28T01:52:58.113Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:52:58.278Z] Validating nodejs source
[debug] [2023-12-28T01:52:59.134Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:52:59.135Z] Building nodejs source
[debug] [2023-12-28T01:52:59.135Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:52:59.136Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:52:59.136Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T01:52:59.138Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[info] Serving at port 8506

[debug] [2023-12-28T01:52:59.964Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:53:00.143Z] Validating nodejs source
[debug] [2023-12-28T01:53:00.888Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:53:00.888Z] Building nodejs source
[debug] [2023-12-28T01:53:00.888Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:53:00.899Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:53:00.903Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8444

[debug] [2023-12-28T01:53:01.670Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:53:04.498Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:53:05.501Z] Validating nodejs source
[debug] [2023-12-28T01:53:06.284Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:53:06.285Z] Building nodejs source
[debug] [2023-12-28T01:53:06.285Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:53:06.286Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:53:06.286Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8265

[debug] [2023-12-28T01:53:07.099Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:53:15.958Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:53:16.520Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:53:16.526Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers"}}
[debug] [2023-12-28T01:53:16.528Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:53:17.545Z] Validating nodejs source
[debug] [2023-12-28T01:53:18.446Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:53:18.447Z] Building nodejs source
[debug] [2023-12-28T01:53:18.448Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:53:18.452Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:53:18.456Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8903

[debug] [2023-12-28T01:53:19.503Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:53:20.705Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:53:21.040Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:53:21.040Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers"}}
[debug] [2023-12-28T01:53:21.040Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:53:21.385Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:53:21.719Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js.map changed, reloading triggers"}}
[debug] [2023-12-28T01:53:21.720Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.js changed, reloading triggers"}}
[debug] [2023-12-28T01:53:21.720Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/gcloudKms.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:53:22.734Z] Validating nodejs source
[debug] [2023-12-28T01:53:23.517Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "asn1js": "^3.0.5",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:53:23.517Z] Building nodejs source
[debug] [2023-12-28T01:53:23.518Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:53:23.520Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:53:23.523Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8165

[debug] [2023-12-28T01:53:24.284Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:54:39.139Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers"}}
[debug] [2023-12-28T01:54:40.152Z] Validating nodejs source
[debug] [2023-12-28T01:54:41.054Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "asn1.js": "^5.4.1",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5"
  },
  "private": true
}
[debug] [2023-12-28T01:54:41.054Z] Building nodejs source
[debug] [2023-12-28T01:54:41.055Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:54:41.057Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:54:41.058Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8435

[debug] [2023-12-28T01:54:42.226Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:54:45.623Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers"}}
[debug] [2023-12-28T01:54:46.425Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package.json changed, reloading triggers"}}
[debug] [2023-12-28T01:54:47.437Z] Validating nodejs source
[debug] [2023-12-28T01:54:48.510Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:54:48.510Z] Building nodejs source
[debug] [2023-12-28T01:54:48.511Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:54:48.515Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:54:48.518Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8512

[debug] [2023-12-28T01:54:49.882Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:55:54.844Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:55:55.866Z] Validating nodejs source
[debug] [2023-12-28T01:55:56.950Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:55:56.951Z] Building nodejs source
[debug] [2023-12-28T01:55:56.951Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:55:56.955Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:55:56.959Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8874

[debug] [2023-12-28T01:55:58.103Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:56:15.677Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:56:16.703Z] Validating nodejs source
[debug] [2023-12-28T01:56:17.618Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:56:17.619Z] Building nodejs source
[debug] [2023-12-28T01:56:17.619Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:56:17.623Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:56:17.626Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8735

[debug] [2023-12-28T01:56:18.733Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:56:43.283Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:56:44.302Z] Validating nodejs source
[debug] [2023-12-28T01:56:45.286Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:56:45.286Z] Building nodejs source
[debug] [2023-12-28T01:56:45.287Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:56:45.290Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:56:45.294Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8872

[debug] [2023-12-28T01:56:46.768Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:57:41.202Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:57:42.213Z] Validating nodejs source
[debug] [2023-12-28T01:57:43.112Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:57:43.113Z] Building nodejs source
[debug] [2023-12-28T01:57:43.114Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:57:43.118Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:57:43.122Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8432

[debug] [2023-12-28T01:57:44.221Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:58:30.642Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:58:31.664Z] Validating nodejs source
[debug] [2023-12-28T01:58:32.706Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:58:32.707Z] Building nodejs source
[debug] [2023-12-28T01:58:32.707Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:58:32.712Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:58:32.718Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8463

[debug] [2023-12-28T01:58:34.099Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:59:06.389Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:59:07.405Z] Validating nodejs source
[debug] [2023-12-28T01:59:08.499Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:59:08.499Z] Building nodejs source
[debug] [2023-12-28T01:59:08.499Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:59:08.503Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:59:08.507Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8298

[debug] [2023-12-28T01:59:09.613Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T01:59:48.444Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T01:59:49.466Z] Validating nodejs source
[debug] [2023-12-28T01:59:50.306Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T01:59:50.307Z] Building nodejs source
[debug] [2023-12-28T01:59:50.307Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T01:59:50.311Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T01:59:50.315Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8873

[debug] [2023-12-28T01:59:51.313Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:00:14.111Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:00:15.130Z] Validating nodejs source
[debug] [2023-12-28T02:00:16.021Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:00:16.022Z] Building nodejs source
[debug] [2023-12-28T02:00:16.022Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:00:16.026Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:00:16.030Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8851

[debug] [2023-12-28T02:00:17.019Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:00:25.749Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:00:26.761Z] Validating nodejs source
[debug] [2023-12-28T02:00:27.669Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:00:27.669Z] Building nodejs source
[debug] [2023-12-28T02:00:27.670Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:00:27.674Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:00:27.677Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T02:00:27.907Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[info] Serving at port 8616

[debug] [2023-12-28T02:00:28.826Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:00:28.914Z] Validating nodejs source
[debug] [2023-12-28T02:00:29.670Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:00:29.671Z] Building nodejs source
[debug] [2023-12-28T02:00:29.671Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:00:29.673Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:00:29.674Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:00:29.678Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8810

[debug] [2023-12-28T02:00:30.508Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:00:30.682Z] Validating nodejs source
[debug] [2023-12-28T02:00:31.428Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:00:31.428Z] Building nodejs source
[debug] [2023-12-28T02:00:31.429Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:00:31.431Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:00:31.434Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8176

[debug] [2023-12-28T02:00:32.196Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:02:01.505Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:02:02.538Z] Validating nodejs source
[debug] [2023-12-28T02:02:03.497Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:02:03.498Z] Building nodejs source
[debug] [2023-12-28T02:02:03.499Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:02:03.505Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:02:03.511Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8306

[debug] [2023-12-28T02:02:04.655Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:02:20.811Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:02:21.834Z] Validating nodejs source
[debug] [2023-12-28T02:02:22.639Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:02:22.639Z] Building nodejs source
[debug] [2023-12-28T02:02:22.640Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:02:22.644Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:02:22.649Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8647

[debug] [2023-12-28T02:02:23.729Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:02:54.628Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:02:55.652Z] Validating nodejs source
[debug] [2023-12-28T02:02:56.597Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:02:56.597Z] Building nodejs source
[debug] [2023-12-28T02:02:56.598Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:02:56.603Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:02:56.607Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8851

[debug] [2023-12-28T02:02:57.788Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:03:55.876Z] Dec 27, 2023 6:03:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:03:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:03:55.937Z] Dec 27, 2023 6:03:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:03:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:03:55.992Z] Dec 27, 2023 6:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:03:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T02:03:55.994Z] Dec 27, 2023 6:03:55 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:03:55 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T02:04:04.593Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:04:04.592Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:04:04.595Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:04:04.592Z"],"workRunningCount":1}
[debug] [2023-12-28T02:04:04.596Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:04:04.628Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:04:04.631Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:04:04.631Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T02:04:04.648Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:04:04.649Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T02:04:05.901Z] [runtime-status] [2742] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:04:05.903Z] [runtime-status] [2742] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:04:05.903Z] [runtime-status] [2742] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T02:04:05.904Z] [runtime-status] [2742] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:04:06.174Z] [runtime-status] [2742] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T02:04:06.174Z] [runtime-status] [2742] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T02:04:06.174Z] [runtime-status] [2742] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:04:06.175Z] [runtime-status] [2742] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:04:06.177Z] [runtime-status] [2742] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:04:06.177Z] [runtime-status] [2742] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T02:04:06.180Z] [runtime-status] [2742] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T02:04:06.652Z] [runtime-status] [2742] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T02:04:06.652Z] [runtime-status] [2742] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_6c240e5180a2b24a.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [2742] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_6c240e5180a2b24a.sock"}}
[debug] [2023-12-28T02:04:06.735Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: IDLE"}}
[debug] [2023-12-28T02:04:06.738Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:04:06.741Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: BUSY"}}
[debug] [2023-12-28T02:04:06.775Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 35.542792ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 35.542792ms"}}
[debug] [2023-12-28T02:04:06.779Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: IDLE"}}
[debug] [2023-12-28T02:04:06.780Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:04:06.781Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:04:06.781Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:04:06.788Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:04:06.787Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:04:06.788Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:04:06.787Z"],"workRunningCount":1}
[debug] [2023-12-28T02:04:06.788Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:04:06.797Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:04:06.799Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:04:06.800Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:04:06.801Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[debug] [2023-12-28T02:04:07.497Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 695.825417ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 695.825417ms"}}
[debug] [2023-12-28T02:04:07.497Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: IDLE"}}
[debug] [2023-12-28T02:04:07.497Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:04:07.498Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:04:07.498Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:05:30.999Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:05:32.022Z] Validating nodejs source
[debug] [2023-12-28T02:05:33.109Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:05:33.109Z] Building nodejs source
[debug] [2023-12-28T02:05:33.110Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:05:33.117Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:05:33.122Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8128

[debug] [2023-12-28T02:05:34.166Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:05:34.200Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:05:34.200Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: FINISHING"}}
[debug] [2023-12-28T02:05:34.215Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: exited"}}
[debug] [2023-12-28T02:05:34.215Z] [worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-4a1f6e32-fe60-44de-aedc-f77fd74c7309]: FINISHED"}}
[debug] [2023-12-28T02:07:46.580Z] Dec 27, 2023 6:07:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:07:46 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:07:46.646Z] Dec 27, 2023 6:07:46 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:07:46 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T02:07:46.647Z] Dec 27, 2023 6:07:46 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:07:46 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T02:07:55.811Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:07:55.810Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:07:55.814Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:07:55.810Z"],"workRunningCount":1}
[debug] [2023-12-28T02:07:55.815Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:07:55.854Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:07:55.855Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:07:55.857Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T02:07:55.877Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:07:55.879Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T02:07:57.042Z] [runtime-status] [4768] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:07:57.043Z] [runtime-status] [4768] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:07:57.043Z] [runtime-status] [4768] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T02:07:57.044Z] [runtime-status] [4768] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:07:57.277Z] [runtime-status] [4768] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T02:07:57.277Z] [runtime-status] [4768] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T02:07:57.277Z] [runtime-status] [4768] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:07:57.278Z] [runtime-status] [4768] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:07:57.279Z] [runtime-status] [4768] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:07:57.280Z] [runtime-status] [4768] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T02:07:57.282Z] [runtime-status] [4768] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T02:07:57.740Z] [runtime-status] [4768] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T02:07:57.741Z] [runtime-status] [4768] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_ec7ea92f3f558c3c.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [4768] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_ec7ea92f3f558c3c.sock"}}
[debug] [2023-12-28T02:07:57.820Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE"}}
[debug] [2023-12-28T02:07:57.820Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:07:57.821Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY"}}
[debug] [2023-12-28T02:07:57.826Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 5.234541ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 5.234541ms"}}
[debug] [2023-12-28T02:07:57.827Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE"}}
[debug] [2023-12-28T02:07:57.827Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:07:57.827Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:07:57.827Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:07:57.831Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:07:57.831Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:07:57.831Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:07:57.831Z"],"workRunningCount":1}
[debug] [2023-12-28T02:07:57.831Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:07:57.833Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:07:57.833Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:07:57.834Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:07:57.835Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[info] >  Error:  TypeError [ERR_INVALID_ARG_TYPE]: The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received undefined {"user":"Error:  TypeError [ERR_INVALID_ARG_TYPE]: The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received undefined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m Error:  TypeError [ERR_INVALID_ARG_TYPE]: The first argument must be of type string or an instance of Buffer, ArrayBuffer, or Array or an Array-like Object. Received undefined"}}
[info] >      at new NodeError (node:internal/errors:405:5) {"user":"    at new NodeError (node:internal/errors:405:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at new NodeError (node:internal/errors:405:5)"}}
[info] >      at Function.from (node:buffer:333:9) {"user":"    at Function.from (node:buffer:333:9)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at Function.from (node:buffer:333:9)"}}
[info] >      at validatePasskeySignature (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:308:49) {"user":"    at validatePasskeySignature (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:308:49)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at validatePasskeySignature (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:308:49)"}}
[info] >      at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:86:13 {"user":"    at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:86:13","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:86:13"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) { {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"}}
[info] >    code: 'ERR_INVALID_ARG_TYPE' {"user":"  code: 'ERR_INVALID_ARG_TYPE'","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m   code: 'ERR_INVALID_ARG_TYPE'"}}
[info] >  } {"user":"}","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m }"}}
[debug] [2023-12-28T02:07:58.359Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 525.042334ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 525.042334ms"}}
[debug] [2023-12-28T02:07:58.360Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE"}}
[debug] [2023-12-28T02:07:58.360Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:07:58.360Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:07:58.361Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:09:16.014Z] Dec 27, 2023 6:09:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:09:16 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:09:16.044Z] Dec 27, 2023 6:09:16 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:09:16 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T02:09:16.046Z] Dec 27, 2023 6:09:16 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:09:16 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T02:09:25.914Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:09:25.912Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:09:25.921Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:09:25.912Z"],"workRunningCount":1}
[debug] [2023-12-28T02:09:25.923Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:09:25.939Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:09:25.940Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:09:25.940Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:09:25.941Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY"}}
[debug] [2023-12-28T02:09:25.962Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 20.704208ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 20.704208ms"}}
[debug] [2023-12-28T02:09:25.962Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE"}}
[debug] [2023-12-28T02:09:25.962Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:09:25.962Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:09:25.963Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:09:25.966Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:09:25.966Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:09:25.966Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:09:25.966Z"],"workRunningCount":1}
[debug] [2023-12-28T02:09:25.966Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:09:25.970Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:09:25.971Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:09:25.971Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:09:25.971Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: BUSY"}}
[debug] [2023-12-28T02:09:26.505Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 534.618542ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 534.618542ms"}}
[debug] [2023-12-28T02:09:26.507Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: IDLE"}}
[debug] [2023-12-28T02:09:26.507Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:09:26.507Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:09:26.507Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:09:50.940Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:09:51.955Z] Validating nodejs source
[debug] [2023-12-28T02:09:52.906Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:09:52.907Z] Building nodejs source
[debug] [2023-12-28T02:09:52.907Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:09:52.924Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:09:52.929Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8439

[debug] [2023-12-28T02:09:54.136Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:09:54.183Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:09:54.183Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: FINISHING"}}
[debug] [2023-12-28T02:09:54.199Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: exited"}}
[debug] [2023-12-28T02:09:54.200Z] [worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-d9026c61-a35f-4d06-8441-6e91e823ea10]: FINISHED"}}
[debug] [2023-12-28T02:10:37.303Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:10:38.312Z] Validating nodejs source
[debug] [2023-12-28T02:10:39.258Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:10:39.258Z] Building nodejs source
[debug] [2023-12-28T02:10:39.259Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:10:39.263Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:10:39.263Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:10:39.263Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:10:39.264Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:10:39.269Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8206

[debug] [2023-12-28T02:10:40.274Z] Validating nodejs source
[debug] [2023-12-28T02:10:41.065Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:10:41.066Z] Building nodejs source
[debug] [2023-12-28T02:10:41.066Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:10:41.078Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:10:41.081Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:10:41.088Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T02:10:41.110Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[info] Serving at port 8041

[debug] [2023-12-28T02:10:41.576Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:10:41.576Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:10:41.576Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:10:41.848Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:10:42.586Z] Validating nodejs source
[debug] [2023-12-28T02:10:43.446Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:10:43.446Z] Building nodejs source
[debug] [2023-12-28T02:10:43.447Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:10:43.449Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:10:43.450Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[debug] [2023-12-28T02:10:43.637Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[info] Serving at port 8791

[debug] [2023-12-28T02:10:44.167Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:10:44.172Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:10:44.262Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:10:44.263Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:10:44.342Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:10:45.276Z] Validating nodejs source
[debug] [2023-12-28T02:10:46.306Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:10:46.307Z] Building nodejs source
[debug] [2023-12-28T02:10:46.308Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:10:46.312Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:10:46.318Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8168

[debug] [2023-12-28T02:10:47.269Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:10:57.985Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:10:58.959Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:10:58.959Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:10:58.959Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:10:59.964Z] Validating nodejs source
[debug] [2023-12-28T02:11:00.929Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:11:00.929Z] Building nodejs source
[debug] [2023-12-28T02:11:00.929Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:11:00.931Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:11:00.933Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8103

[debug] [2023-12-28T02:11:02.090Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:11:09.510Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:11:10.300Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:11:10.300Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:11:10.300Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:11:11.306Z] Validating nodejs source
[debug] [2023-12-28T02:11:12.361Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:11:12.361Z] Building nodejs source
[debug] [2023-12-28T02:11:12.362Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:11:12.369Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:11:12.371Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8843

[error] ReferenceError: asn1 is not defined
    at Object.<anonymous> (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:300:26)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)
    at Module.load (node:internal/modules/cjs/loader:1119:32)
    at Module._load (node:internal/modules/cjs/loader:960:12)
    at Module.require (node:internal/modules/cjs/loader:1143:19)
    at require (node:internal/modules/cjs/helpers:121:18)
    at Object.<anonymous> (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/index.js:28:27)
    at Module._compile (node:internal/modules/cjs/loader:1256:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1310:10)

[debug] [2023-12-28T02:11:13.488Z] Got response code 400; body Failed to generate manifest from function source: ReferenceError: asn1 is not defined
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Functions codebase could not be analyzed successfully. It may have a syntax or runtime error"}}
[debug] [2023-12-28T02:11:16.619Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:11:17.427Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:11:17.427Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:11:17.427Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:11:18.440Z] Validating nodejs source
[debug] [2023-12-28T02:11:19.332Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:11:19.333Z] Building nodejs source
[debug] [2023-12-28T02:11:19.333Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:11:19.337Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:11:19.341Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8168

[debug] [2023-12-28T02:11:20.352Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:11:27.398Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:11:28.080Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:11:28.080Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:11:28.081Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:11:29.102Z] Validating nodejs source
[debug] [2023-12-28T02:11:30.077Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:11:30.077Z] Building nodejs source
[debug] [2023-12-28T02:11:30.078Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:11:30.088Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:11:30.093Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8093

[debug] [2023-12-28T02:11:31.119Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:11:38.759Z] Dec 27, 2023 6:11:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:11:38 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:11:38.775Z] Dec 27, 2023 6:11:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:11:38 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T02:11:38.776Z] Dec 27, 2023 6:11:38 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:11:38 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T02:11:47.831Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:11:47.831Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:11:47.839Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:11:47.831Z"],"workRunningCount":1}
[debug] [2023-12-28T02:11:47.839Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:11:47.855Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:11:47.856Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:11:47.856Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T02:11:47.868Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:11:47.868Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T02:11:48.940Z] [runtime-status] [7204] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:11:48.941Z] [runtime-status] [7204] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:11:48.941Z] [runtime-status] [7204] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T02:11:48.942Z] [runtime-status] [7204] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:11:49.135Z] [runtime-status] [7204] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T02:11:49.136Z] [runtime-status] [7204] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T02:11:49.136Z] [runtime-status] [7204] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:11:49.137Z] [runtime-status] [7204] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:11:49.138Z] [runtime-status] [7204] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:11:49.139Z] [runtime-status] [7204] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T02:11:49.141Z] [runtime-status] [7204] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T02:11:49.578Z] [runtime-status] [7204] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T02:11:49.579Z] [runtime-status] [7204] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_26f756b0512b5716.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7204] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_26f756b0512b5716.sock"}}
[debug] [2023-12-28T02:11:49.623Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: IDLE"}}
[debug] [2023-12-28T02:11:49.625Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:11:49.628Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: BUSY"}}
[debug] [2023-12-28T02:11:49.636Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 8.950209ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 8.950209ms"}}
[debug] [2023-12-28T02:11:49.637Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: IDLE"}}
[debug] [2023-12-28T02:11:49.637Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:11:49.637Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:11:49.637Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:11:49.641Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:11:49.641Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:11:49.641Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:11:49.641Z"],"workRunningCount":1}
[debug] [2023-12-28T02:11:49.641Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:11:49.651Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:11:49.651Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:11:49.652Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:11:49.653Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[info] >  Error:  ReferenceError: obj is not defined {"user":"Error:  ReferenceError: obj is not defined","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m Error:  ReferenceError: obj is not defined"}}
[info] >      at validatePasskeySignature (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:342:67) {"user":"    at validatePasskeySignature (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:342:67)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at validatePasskeySignature (/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:342:67)"}}
[info] >      at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:87:13 {"user":"    at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:87:13","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js:87:13"}}
[info] >      at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {"user":"    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"\u001b[90m> \u001b[39m     at process.processTicksAndRejections (node:internal/process/task_queues:95:5)"}}
[debug] [2023-12-28T02:11:50.197Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 543.77375ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 543.77375ms"}}
[debug] [2023-12-28T02:11:50.197Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: IDLE"}}
[debug] [2023-12-28T02:11:50.197Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:11:50.198Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:11:50.198Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:07.959Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:12:08.580Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:12:08.580Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:12:08.580Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:12:09.593Z] Validating nodejs source
[debug] [2023-12-28T02:12:10.509Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:12:10.509Z] Building nodejs source
[debug] [2023-12-28T02:12:10.510Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:12:10.513Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:12:10.517Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8327

[debug] [2023-12-28T02:12:11.513Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:12:11.557Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:12:11.557Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: FINISHING"}}
[debug] [2023-12-28T02:12:11.570Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: exited"}}
[debug] [2023-12-28T02:12:11.571Z] [worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-5e04f5be-0e49-4b95-8319-d0579c740bea]: FINISHED"}}
[debug] [2023-12-28T02:12:23.175Z] Dec 27, 2023 6:12:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:12:23 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:12:23.215Z] Dec 27, 2023 6:12:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:12:23 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T02:12:23.216Z] Dec 27, 2023 6:12:23 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:12:23 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xd66d097f16998ea7883f3de7cdb69b07d002e366bde86fb3e9d4caed32c68609) not found.\n"}}
[debug] [2023-12-28T02:12:31.580Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:12:31.579Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:31.583Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:12:31.579Z"],"workRunningCount":1}
[debug] [2023-12-28T02:12:31.583Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:12:31.612Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:12:31.613Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:12:31.614Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T02:12:31.629Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:12:31.629Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T02:12:32.732Z] [runtime-status] [7561] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:12:32.732Z] [runtime-status] [7561] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:32.733Z] [runtime-status] [7561] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T02:12:32.734Z] [runtime-status] [7561] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:32.921Z] [runtime-status] [7561] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T02:12:32.921Z] [runtime-status] [7561] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T02:12:32.921Z] [runtime-status] [7561] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:32.922Z] [runtime-status] [7561] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:12:32.923Z] [runtime-status] [7561] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:32.923Z] [runtime-status] [7561] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T02:12:32.925Z] [runtime-status] [7561] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T02:12:33.354Z] [runtime-status] [7561] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T02:12:33.355Z] [runtime-status] [7561] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_6b1597b92d278711.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [7561] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_6b1597b92d278711.sock"}}
[debug] [2023-12-28T02:12:33.364Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: IDLE"}}
[debug] [2023-12-28T02:12:33.365Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:12:33.365Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: BUSY"}}
[debug] [2023-12-28T02:12:33.374Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 8.361875ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 8.361875ms"}}
[debug] [2023-12-28T02:12:33.374Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: IDLE"}}
[debug] [2023-12-28T02:12:33.374Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:12:33.375Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:12:33.375Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:33.382Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:12:33.381Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:33.382Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T02:12:33.381Z"],"workRunningCount":1}
[debug] [2023-12-28T02:12:33.382Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T02:12:33.385Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:12:33.387Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T02:12:33.388Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T02:12:33.389Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[debug] [2023-12-28T02:12:34.286Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast [none]
[debug] [2023-12-28T02:12:34.288Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast {"eventId":"fbbadbfa-1c26-41e0-8e42-b5cdbe9547fd","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/openid3-bbd1b","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2023-12-28T02:12:34.282Z","data":{"uid":"0xA7F0B7C5baD54B3406c03cA4653d2d2A9D293936","emailVerified":false,"metadata":{"creationTime":"2023-12-28T02:12:34.281Z","lastSignInTime":"2023-12-28T02:12:34.281Z"},"customClaims":{}}}
[debug] [2023-12-28T02:12:34.311Z] Dec 27, 2023 6:12:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:12:34 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:12:34.322Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast 200
[debug] [2023-12-28T02:12:34.322Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-12-28T02:12:34.517Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 1128.393083ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 1128.393083ms"}}
[debug] [2023-12-28T02:12:34.519Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: IDLE"}}
[debug] [2023-12-28T02:12:34.519Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:12:34.519Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:12:34.519Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:34.929Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T02:12:34.929Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:34.930Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T02:12:34.929Z"],"workRunningCount":1}
[debug] [2023-12-28T02:12:34.930Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/sessionLogin --> us-central1-sessionLogin
[debug] [2023-12-28T02:12:34.938Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:12:34.939Z] [functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/"}}
[debug] [2023-12-28T02:12:34.945Z] [worker-pool] addWorker(us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sessionLogin)"}}
[debug] [2023-12-28T02:12:34.945Z] [worker-pool] Adding worker with key us-central1-sessionLogin, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sessionLogin, total=1"}}
[debug] [2023-12-28T02:12:35.699Z] [runtime-status] [7603] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:12:35.699Z] [runtime-status] [7603] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:35.700Z] [runtime-status] [7603] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T02:12:35.701Z] [runtime-status] [7603] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:35.847Z] [runtime-status] [7603] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T02:12:35.847Z] [runtime-status] [7603] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T02:12:35.848Z] [runtime-status] [7603] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:35.848Z] [runtime-status] [7603] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T02:12:35.849Z] [runtime-status] [7603] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T02:12:35.849Z] [runtime-status] [7603] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T02:12:35.851Z] [runtime-status] [7603] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T02:12:36.167Z] [runtime-status] [7603] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T02:12:36.168Z] [runtime-status] [7603] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_afdabad4dd3dbc46.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [7603] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_afdabad4dd3dbc46.sock"}}
[debug] [2023-12-28T02:12:36.180Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: IDLE"}}
[debug] [2023-12-28T02:12:36.182Z] [worker-pool] submitRequest(triggerId=us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sessionLogin)"}}
[info] i  functions: Beginning execution of "us-central1-sessionLogin" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Beginning execution of \"us-central1-sessionLogin\""}}
[debug] [2023-12-28T02:12:36.183Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: BUSY"}}
[debug] [2023-12-28T02:12:36.193Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sessionLogin" in 9.859833ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finished \"us-central1-sessionLogin\" in 9.859833ms"}}
[debug] [2023-12-28T02:12:36.193Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: IDLE"}}
[debug] [2023-12-28T02:12:36.193Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:12:36.193Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:12:36.194Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:36.194Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T02:12:36.194Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:12:36.195Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T02:12:36.194Z"],"workRunningCount":1}
[debug] [2023-12-28T02:12:36.195Z] Accepted request POST /openid3-bbd1b/us-central1/sessionLogin --> us-central1-sessionLogin
[debug] [2023-12-28T02:12:36.198Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T02:12:36.199Z] [functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/"}}
[debug] [2023-12-28T02:12:36.200Z] [worker-pool] submitRequest(triggerId=us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sessionLogin)"}}
[info] i  functions: Beginning execution of "us-central1-sessionLogin" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Beginning execution of \"us-central1-sessionLogin\""}}
[debug] [2023-12-28T02:12:36.201Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: BUSY"}}
[debug] [2023-12-28T02:12:36.319Z] Dec 27, 2023 6:12:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 6:12:36 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-12-28T02:12:36.366Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sessionLogin" in 166.494667ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finished \"us-central1-sessionLogin\" in 166.494667ms"}}
[debug] [2023-12-28T02:12:36.369Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: IDLE"}}
[debug] [2023-12-28T02:12:36.369Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T02:12:36.369Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T02:12:36.369Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T02:13:29.421Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:13:29.932Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T02:13:29.932Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T02:13:29.932Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T02:13:30.941Z] Validating nodejs source
[debug] [2023-12-28T02:13:31.883Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T02:13:31.883Z] Building nodejs source
[debug] [2023-12-28T02:13:31.884Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T02:13:31.887Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T02:13:31.891Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8822

[debug] [2023-12-28T02:13:33.060Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T02:13:33.093Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T02:13:33.094Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: FINISHING"}}
[debug] [2023-12-28T02:13:33.094Z] [worker-pool] Shutting down IDLE worker (us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-sessionLogin)"}}
[debug] [2023-12-28T02:13:33.094Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: FINISHING"}}
[debug] [2023-12-28T02:13:33.114Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: exited"}}
[debug] [2023-12-28T02:13:33.114Z] [worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-908f8242-1b86-454d-a443-a1a414286053]: FINISHED"}}
[debug] [2023-12-28T02:13:33.114Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: exited"}}
[debug] [2023-12-28T02:13:33.114Z] [worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-68d437e7-0216-4bd9-a689-d80b2e434b6a]: FINISHED"}}
[debug] [2023-12-28T03:56:08.113Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T03:56:08.246Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T03:56:09.272Z] Validating nodejs source
[debug] [2023-12-28T03:56:10.685Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T03:56:10.686Z] Building nodejs source
[debug] [2023-12-28T03:56:10.688Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T03:56:10.695Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T03:56:10.702Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8478

[debug] [2023-12-28T03:56:11.976Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T03:56:19.108Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T03:56:20.124Z] Validating nodejs source
[debug] [2023-12-28T03:56:21.031Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T03:56:21.032Z] Building nodejs source
[debug] [2023-12-28T03:56:21.032Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T03:56:21.042Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T03:56:21.048Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8097

[debug] [2023-12-28T03:56:22.072Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T03:56:23.382Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T03:56:23.994Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T03:56:23.995Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T03:56:23.996Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T03:56:25.008Z] Validating nodejs source
[debug] [2023-12-28T03:56:26.037Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T03:56:26.038Z] Building nodejs source
[debug] [2023-12-28T03:56:26.038Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T03:56:26.043Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T03:56:26.050Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8588

[debug] [2023-12-28T03:56:26.925Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T03:56:33.546Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T03:56:34.399Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js.map changed, reloading triggers"}}
[debug] [2023-12-28T03:56:34.399Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.js changed, reloading triggers"}}
[debug] [2023-12-28T03:56:34.400Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/lib/auth.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T03:56:35.434Z] Validating nodejs source
[debug] [2023-12-28T03:56:36.385Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T03:56:36.385Z] Building nodejs source
[debug] [2023-12-28T03:56:36.386Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T03:56:36.395Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T03:56:36.399Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8808

[debug] [2023-12-28T03:56:37.365Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T03:56:51.070Z] Dec 27, 2023 7:56:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 7:56:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T03:56:51.145Z] Dec 27, 2023 7:56:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 7:56:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-12-28T03:56:51.187Z] Dec 27, 2023 7:56:51 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0x243ac1a601cf330fb95c5a9df279398224760e7d727fc914cf2915a20e645460) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0x243ac1a601cf330fb95c5a9df279398224760e7d727fc914cf2915a20e645460) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 7:56:51 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0x243ac1a601cf330fb95c5a9df279398224760e7d727fc914cf2915a20e645460) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0x243ac1a601cf330fb95c5a9df279398224760e7d727fc914cf2915a20e645460) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T03:56:51.190Z] Dec 27, 2023 7:56:51 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0x243ac1a601cf330fb95c5a9df279398224760e7d727fc914cf2915a20e645460) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 7:56:51 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0x243ac1a601cf330fb95c5a9df279398224760e7d727fc914cf2915a20e645460) not found.\n"}}
[debug] [2023-12-28T03:57:03.188Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T03:57:03.187Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T03:57:03.192Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T03:57:03.187Z"],"workRunningCount":1}
[debug] [2023-12-28T03:57:03.193Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T03:57:03.218Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T03:57:03.219Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T03:57:03.219Z] [worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-registerUserWithPasskey: 1 --> 0"}}
[debug] [2023-12-28T03:57:03.219Z] [worker-pool] Cleaned up workers for us-central1-sessionLogin: 1 --> 0 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Cleaned up workers for us-central1-sessionLogin: 1 --> 0"}}
[debug] [2023-12-28T03:57:03.228Z] [worker-pool] addWorker(us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T03:57:03.229Z] [worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-registerUserWithPasskey, total=1"}}
[debug] [2023-12-28T03:57:04.452Z] [runtime-status] [38889] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T03:57:04.453Z] [runtime-status] [38889] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:04.453Z] [runtime-status] [38889] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T03:57:04.454Z] [runtime-status] [38889] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:04.637Z] [runtime-status] [38889] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T03:57:04.637Z] [runtime-status] [38889] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T03:57:04.637Z] [runtime-status] [38889] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:04.638Z] [runtime-status] [38889] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T03:57:04.641Z] [runtime-status] [38889] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:04.641Z] [runtime-status] [38889] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T03:57:04.642Z] [runtime-status] [38889] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T03:57:05.045Z] [runtime-status] [38889] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T03:57:05.046Z] [runtime-status] [38889] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_0aed799f6a62aa6f.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[runtime-status] [38889] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_0aed799f6a62aa6f.sock"}}
[debug] [2023-12-28T03:57:05.074Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE"}}
[debug] [2023-12-28T03:57:05.074Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T03:57:05.075Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY"}}
[debug] [2023-12-28T03:57:05.081Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 6.059583ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 6.059583ms"}}
[debug] [2023-12-28T03:57:05.082Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE"}}
[debug] [2023-12-28T03:57:05.082Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T03:57:05.082Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T03:57:05.082Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T03:57:05.086Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T03:57:05.086Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T03:57:05.087Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T03:57:05.086Z"],"workRunningCount":1}
[debug] [2023-12-28T03:57:05.087Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T03:57:05.091Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T03:57:05.091Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T03:57:05.093Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T03:57:05.094Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY"}}
[warn] ⚠  External network resource requested!
   - URL: "https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336"
 - Be careful, this may be a production service. {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"External network resource requested!\n   - URL: \"https://sepolia.infura.io/v3/85d29f41f3f34120a34a544f0a065336\"\n - Be careful, this may be a production service."}}
[debug] [2023-12-28T03:57:06.031Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast [none]
[debug] [2023-12-28T03:57:06.033Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast {"eventId":"af47b63a-8fe6-40d3-9ce1-b76827000a8c","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/openid3-bbd1b","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2023-12-28T03:57:06.030Z","data":{"uid":"0x5f6366c2561c6ebb64B507Bb1b4168956979320e","emailVerified":false,"metadata":{"creationTime":"2023-12-28T03:57:06.030Z","lastSignInTime":"2023-12-28T03:57:06.030Z"},"customClaims":{}}}
[debug] [2023-12-28T03:57:06.041Z] Dec 27, 2023 7:57:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 7:57:05 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-12-28T03:57:06.046Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast 200
[debug] [2023-12-28T03:57:06.046Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-12-28T03:57:06.054Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 960.049416ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 960.049416ms"}}
[debug] [2023-12-28T03:57:06.054Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE"}}
[debug] [2023-12-28T03:57:06.054Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T03:57:06.055Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T03:57:06.055Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T03:57:12.303Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T03:57:12.303Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T03:57:12.304Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T03:57:12.303Z"],"workRunningCount":1}
[debug] [2023-12-28T03:57:12.304Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/sessionLogin --> us-central1-sessionLogin
[debug] [2023-12-28T03:57:12.315Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T03:57:12.316Z] [functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/"}}
[debug] [2023-12-28T03:57:12.322Z] [worker-pool] addWorker(us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] addWorker(us-central1-sessionLogin)"}}
[debug] [2023-12-28T03:57:12.323Z] [worker-pool] Adding worker with key us-central1-sessionLogin, total=1 {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Adding worker with key us-central1-sessionLogin, total=1"}}
[debug] [2023-12-28T03:57:13.302Z] [runtime-status] [38973] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T03:57:13.302Z] [runtime-status] [38973] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:13.303Z] [runtime-status] [38973] Outgoing network have been stubbed. [{"name":"http","status":"mocked"},{"name":"http","status":"mocked"},{"name":"https","status":"mocked"},{"name":"https","status":"mocked"},{"name":"net","status":"mocked"}] {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Outgoing network have been stubbed. [{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"http\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"https\",\"status\":\"mocked\"},{\"name\":\"net\",\"status\":\"mocked\"}]"}}
[debug] [2023-12-28T03:57:13.304Z] [runtime-status] [38973] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:13.475Z] [runtime-status] [38973] Checked functions.config() {"config":{"doppler":{"ALCHEMY_KEY":"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW","CONTRACT_V0_0_8_ACCOUNT_FACTORY":"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9","CONTRACT_V0_0_8_ACCOUNT_MANAGER":"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d","CONTRACT_V0_0_8_ACCOUNT_PROXY":"0xD229D9b8a09733dE6DbDC9F29774006fd247773a","CONTRACT_V0_0_8_PASSSKEY_ADMIN":"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f","DEV_KEY":"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99","DEV_KEY_IV":"14dd722098c1bd8679f03d13c7e9b372","DOPPLER_CONFIG":"dev","DOPPLER_ENVIRONMENT":"dev","DOPPLER_PROJECT":"mizu","ENCRYPTOR_KEY_ID":"encryptor","ENCRYPTOR_KEY_RING_ID":"encryptor","ENV":"dev","ETHERSCAN_API_KEY":"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP","FIREBASE_API_KEY":"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE","FIREBASE_APP_ID":"1:281794963795:web:5c8162bc9320b5af7819a6","FIREBASE_AUTH_DOMAIN":"openid3-bbd1b.firebaseapp.com","FIREBASE_DATABASE_URL":"https://openid3-bbd1b-default-rtdb.firebaseio.com","FIREBASE_MEASUREMENT_ID":"G-96WRSSJ7JL","FIREBASE_MESSAGING_SENDER_ID":"281794963795","FIREBASE_PROJECT_ID":"openid3-bbd1b","FIREBASE_STORAGE_BUCKET":"openid3-bbd1b.appspot.com","GCP_KEY_LOCATION_GLOBAL":"global","GOOGLE_API_KEY":"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA","GOOGLE_OAUTH_CLIENT_ID":"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com","GOOGLE_OAUTH_CLIENT_SECRET":"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","HARDHAT_DEPLOYER":"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a","ID_DOMAIN":"hexlink.io","INFURA_API_KEY":"85d29f41f3f34120a34a544f0a065336","MATRIX_JWT_SIGNER_PRIV":"-----BEGIN RSA PRIVATE KEY-----\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\n-----END RSA PRIVATE KEY-----","PIMLICO_API_KEY":"4da059a1-c017-488b-849d-2041558b3217","RANDOM_ERC20":"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9","REACT_APP_DOMAIN":"localhost","REACT_APP_ORIGIN":"http://localhost:3000","REACT_APP_RP_NAME":"mizu","RSA_SIGNER_KEY_ID":"jwtsigner2","RSA_SIGNER_KEY_RING_ID":"jwtsigner","SERVER_DOMAIN":"localhost","SERVICE_ACCOUNT_KEY_PATH":"use_your_own_path"}}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Checked functions.config() {\"config\":{\"doppler\":{\"ALCHEMY_KEY\":\"lPQx8aC08_3ilXjrqLrzhe4JoTmH14JW\",\"CONTRACT_V0_0_8_ACCOUNT_FACTORY\":\"0x0Cca1F5F5AAD99De6148B0E7988231B21Ff765f9\",\"CONTRACT_V0_0_8_ACCOUNT_MANAGER\":\"0x176A4503ABf539A116bA922Be43A5eb6945C8d2d\",\"CONTRACT_V0_0_8_ACCOUNT_PROXY\":\"0xD229D9b8a09733dE6DbDC9F29774006fd247773a\",\"CONTRACT_V0_0_8_PASSSKEY_ADMIN\":\"0x6fdA54A3b2b0aF3230BfB44D7b0d467f81FdF62f\",\"DEV_KEY\":\"95326c2370a24f49727a86ebac922e381b96cb866c6fdb4150f48c551cd47c99\",\"DEV_KEY_IV\":\"14dd722098c1bd8679f03d13c7e9b372\",\"DOPPLER_CONFIG\":\"dev\",\"DOPPLER_ENVIRONMENT\":\"dev\",\"DOPPLER_PROJECT\":\"mizu\",\"ENCRYPTOR_KEY_ID\":\"encryptor\",\"ENCRYPTOR_KEY_RING_ID\":\"encryptor\",\"ENV\":\"dev\",\"ETHERSCAN_API_KEY\":\"8H9W9CISNFWZQGQX92QF9A2A8YT7VUF6ZP\",\"FIREBASE_API_KEY\":\"AIzaSyCB-kgiuALdZpvM4WXJsnbkFd_zyOA_cJE\",\"FIREBASE_APP_ID\":\"1:281794963795:web:5c8162bc9320b5af7819a6\",\"FIREBASE_AUTH_DOMAIN\":\"openid3-bbd1b.firebaseapp.com\",\"FIREBASE_DATABASE_URL\":\"https://openid3-bbd1b-default-rtdb.firebaseio.com\",\"FIREBASE_MEASUREMENT_ID\":\"G-96WRSSJ7JL\",\"FIREBASE_MESSAGING_SENDER_ID\":\"281794963795\",\"FIREBASE_PROJECT_ID\":\"openid3-bbd1b\",\"FIREBASE_STORAGE_BUCKET\":\"openid3-bbd1b.appspot.com\",\"GCP_KEY_LOCATION_GLOBAL\":\"global\",\"GOOGLE_API_KEY\":\"AIzaSyCsAOBEeBdkvk5lwiKxOsTx9HMe5PCEcFA\",\"GOOGLE_OAUTH_CLIENT_ID\":\"872182092423-71hq7tpatpnlojcqcvs6740gouj8dshh.apps.googleusercontent.com\",\"GOOGLE_OAUTH_CLIENT_SECRET\":\"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\",\"HARDHAT_DEPLOYER\":\"3d89fe0ddc24a9a306f1bccef606217836035c26bdd7a412738f2fb38d1f088a\",\"ID_DOMAIN\":\"hexlink.io\",\"INFURA_API_KEY\":\"85d29f41f3f34120a34a544f0a065336\",\"MATRIX_JWT_SIGNER_PRIV\":\"-----BEGIN RSA PRIVATE KEY-----\\nMIIEowIBAAKCAQEAyMfD1CzjGhbMS4RovPTPj2bbS5JhAaiqcwj+tiO6sOyT4zmL\\nH1JOfb2F3E4Il8c5CYKY3QbsAed/bP7XLXPhoFYGZ4l2wnWKwSjLIFteIVGZRIuf\\n9+zXrPnQM3+vtmDhiXKIIxo0Vdu7tyY1d7nIvwerXj2QVbyiH33bGnu8nQ0D48WU\\ng+Sgn1iNpgW0CjshwbmjDIjtOfwlrOXJkNDt/8lci2cDNWrDMhzMZ16hpLzFB2sZ\\nrxeadmjNEuN3OqnpefJRN77jtY47E/vsBIZH96HDZ1xR8j9AYp3TrOyneuaBLSH4\\nE/9KWCh9HVw6FXn5McFrJR0NBqeHGhJhaS2euQIDAQABAoIBAGn6B0NW7gg3QF4b\\n5azXCzeF8vpQqSNXA6D0fn1lHoWEWgr1tJkzuHpmLuG5zo9OeKysYkNIBAp9RqUh\\nXjJ/l/gpb/f2dtjtce/CuHS7xVOQ3nVvvV//g1eqBFsqanS5blI+Qd1FV5p6APsL\\nD+3CAlPSmIGFvUmD5473v06bQVMjPBJHSg3gjnMSh7EAqanrmOkx1WILreBeX7oX\\nZ0T2Bta7siRXOLI0w4jueXIn/7LeHRnnXgJ1OHsAsr44om/31AYVP4A4BKPF/D2u\\nW49dNQgIvl4JN0wNHuAHoWDUIk+VkU5dJw1vPhnd/2SkOulMfUF/OcseQi0eQewm\\nD/ScaoECgYEA6m5QE4oPMwGYGxocBTTvvX8so3m5fRvCF4QHOMmF/MbvKB5/5lwd\\n8R1p11NYkGfj1OJNPIlfVmGH09+5U7w8HdiWUzuhT6MEhsSCaOPZfEr1LT1kgE6Q\\ncbs30wxiAUfolSBUBe8BwZpq2K+dj5Lq0nilk9tMSw3omW7GiIDA1jcCgYEA20Dc\\nT1MJFOavMtEAdPio6eh7Ar3nPRzzuEAkp02WovpQT6i/lged42K3M9SLvLtTBJIF\\nDs5ttK/O36Gsns/vx2IPdWs+7wqk8DK9xAhWFnhamaqBA+yXC2sy1uJ0XXf3SNp9\\n+tQSDUqtHWxMDLBycqNY+YzkyfB0ODCQykO+uo8CgYBiZB4ztTQf4kFmzpSIEum0\\nDNY9Xm9ddPMHT6CAUwRrTUs++V4Q3wSqGAA+IXsAULostTZZfAaJiLGrWTC9Vjmd\\nBTRChrpzZCYYMg3R3B+BrSwt6qBtwYuaUEtjxsSzaOzS+hiJzQBds2O4wixNAAqS\\nf5Ru9BGXRqUjEH0++Vr2DQKBgG/YropouYFIDKfHpowFLWXliprjdUrfshST5B7U\\nnbuWJdH9K37Fc+3DNeHi00X76WWzd5EODTjXVpkOSJjbSl5Tz77+bqRSscE2oUeX\\nWRMtYkpxiE8QKh1RGiY0b1gfEq6/hvSlqm/NYHJaBJGUkU2ZtpHXJf8+AouHetUz\\nqeBRAoGBAIJ0dY5Wo1L5jGRxyif9rvYVnkwxKLVAhZcwdWTgvqq0Z8aAYq1xx651\\nKBaTw3vFR9+6k5Vu51YMPgLimKtw42ProM3odzEw0SEA2qI/ePAspO2ubHhuSLA+\\njhoJCnJBXftdt6To5YxYGKE1Me89/uGUJ8CkF6QnOsSEVBKHtoAs\\n-----END RSA PRIVATE KEY-----\",\"PIMLICO_API_KEY\":\"4da059a1-c017-488b-849d-2041558b3217\",\"RANDOM_ERC20\":\"0x7439E9Bb6D8a84dd3A23fe621A30F95403F87fB9\",\"REACT_APP_DOMAIN\":\"localhost\",\"REACT_APP_ORIGIN\":\"http://localhost:3000\",\"REACT_APP_RP_NAME\":\"mizu\",\"RSA_SIGNER_KEY_ID\":\"jwtsigner2\",\"RSA_SIGNER_KEY_RING_ID\":\"jwtsigner\",\"SERVER_DOMAIN\":\"localhost\",\"SERVICE_ACCOUNT_KEY_PATH\":\"use_your_own_path\"}}}"}}
[debug] [2023-12-28T03:57:13.476Z] [runtime-status] [38973] firebase-functions has been stubbed. {"functionsResolution":{"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] firebase-functions has been stubbed. {\"functionsResolution\":{\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}}"}}
[debug] [2023-12-28T03:57:13.476Z] [runtime-status] [38973] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:13.477Z] [runtime-status] [38973] Resolved module firebase-admin {"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Resolved module firebase-admin {\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}"}}
[debug] [2023-12-28T03:57:13.478Z] [runtime-status] [38973] Resolved module firebase-functions {"declared":true,"installed":true,"version":"4.5.0","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Resolved module firebase-functions {\"declared\":true,\"installed\":true,\"version\":\"4.5.0\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-functions/lib/v1/index.js\"}"}}
[debug] [2023-12-28T03:57:13.478Z] [runtime-status] [38973] firebase-admin has been stubbed. {"adminResolution":{"declared":true,"installed":true,"version":"11.11.1","resolution":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js"}} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] firebase-admin has been stubbed. {\"adminResolution\":{\"declared\":true,\"installed\":true,\"version\":\"11.11.1\",\"resolution\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/firebase-admin/lib/index.js\"}}"}}
[debug] [2023-12-28T03:57:13.480Z] [runtime-status] [38973] initializeApp(DEFAULT) {"storageBucket":"openid3-bbd1b.appspot.com","databaseURL":"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb","projectId":"openid3-bbd1b"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] initializeApp(DEFAULT) {\"storageBucket\":\"openid3-bbd1b.appspot.com\",\"databaseURL\":\"http://127.0.0.1:9000/?ns=openid3-bbd1b-default-rtdb\",\"projectId\":\"openid3-bbd1b\"}"}}
[debug] [2023-12-28T03:57:13.886Z] [runtime-status] [38973] Functions runtime initialized. {"cwd":"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth","node_version":"18.17.1"} {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Functions runtime initialized. {\"cwd\":\"/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth\",\"node_version\":\"18.17.1\"}"}}
[debug] [2023-12-28T03:57:13.887Z] [runtime-status] [38973] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_bf692507abed52c5.sock {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[runtime-status] [38973] Listening to port: /var/folders/rz/zm8ccz654bv7h5w8kj5ygk800000gn/T/fire_emu_bf692507abed52c5.sock"}}
[debug] [2023-12-28T03:57:13.954Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE"}}
[debug] [2023-12-28T03:57:13.954Z] [worker-pool] submitRequest(triggerId=us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sessionLogin)"}}
[info] i  functions: Beginning execution of "us-central1-sessionLogin" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Beginning execution of \"us-central1-sessionLogin\""}}
[debug] [2023-12-28T03:57:13.955Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY"}}
[debug] [2023-12-28T03:57:13.958Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sessionLogin" in 3.60025ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finished \"us-central1-sessionLogin\" in 3.60025ms"}}
[debug] [2023-12-28T03:57:13.959Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE"}}
[debug] [2023-12-28T03:57:13.959Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T03:57:13.959Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T03:57:13.959Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T03:57:13.966Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T03:57:13.966Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T03:57:13.966Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T03:57:13.966Z"],"workRunningCount":1}
[debug] [2023-12-28T03:57:13.966Z] Accepted request POST /openid3-bbd1b/us-central1/sessionLogin --> us-central1-sessionLogin
[debug] [2023-12-28T03:57:13.967Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T03:57:13.968Z] [functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/"}}
[debug] [2023-12-28T03:57:13.969Z] [worker-pool] submitRequest(triggerId=us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sessionLogin)"}}
[info] i  functions: Beginning execution of "us-central1-sessionLogin" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Beginning execution of \"us-central1-sessionLogin\""}}
[debug] [2023-12-28T03:57:13.970Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY"}}
[debug] [2023-12-28T03:57:14.098Z] Dec 27, 2023 7:57:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 7:57:14 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected HTTP/2 connection.\n"}}
[debug] [2023-12-28T03:57:14.142Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sessionLogin" in 173.42325ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finished \"us-central1-sessionLogin\" in 173.42325ms"}}
[debug] [2023-12-28T03:57:14.144Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE"}}
[debug] [2023-12-28T03:57:14.145Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T03:57:14.145Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T03:57:14.145Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:02:51.185Z] Dec 27, 2023 8:02:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:02:51 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:02:51.276Z] Dec 27, 2023 8:02:51 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:02:51 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:02:51.284Z] Dec 27, 2023 8:02:51 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:02:51 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n"}}
[debug] [2023-12-28T04:02:57.692Z] Dec 27, 2023 8:02:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:02:57 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:03:01.727Z] Dec 27, 2023 8:03:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:01 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:03:01.741Z] Dec 27, 2023 8:03:01 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:01 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:03:01.743Z] Dec 27, 2023 8:03:01 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:01 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n"}}
[debug] [2023-12-28T04:03:10.399Z] Dec 27, 2023 8:03:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:10 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:03:10.417Z] Dec 27, 2023 8:03:10 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:10 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:03:10.420Z] Dec 27, 2023 8:03:10 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:10 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n"}}
[debug] [2023-12-28T04:03:25.302Z] Dec 27, 2023 8:03:25 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:25 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:03:25.306Z] Dec 27, 2023 8:03:25 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:03:25 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n"}}
[debug] [2023-12-28T04:09:37.809Z] Dec 27, 2023 8:09:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:09:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:09:37.839Z] Dec 27, 2023 8:09:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:09:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:09:37.840Z] Dec 27, 2023 8:09:37 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:09:37 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n"}}
[debug] [2023-12-28T04:09:45.073Z] Dec 27, 2023 8:09:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:09:45 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:09:45.082Z] Dec 27, 2023 8:09:45 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:09:45 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xa55ac469b50a759626b0ee204d3a20e5d1fb2636f7042eee7822f82b0dd7cfbb) not found.\n"}}
[debug] [2023-12-28T04:22:56.995Z] Dec 27, 2023 8:22:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:22:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:34:37.946Z] Dec 27, 2023 8:34:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:34:37 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:34:37.980Z] Dec 27, 2023 8:34:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:34:37 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:34:37.982Z] Dec 27, 2023 8:34:37 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:34:37 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\n"}}
[debug] [2023-12-28T04:35:56.350Z] Dec 27, 2023 8:35:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:35:56 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:35:56.380Z] Dec 27, 2023 8:35:56 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:35:56 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:35:56.383Z] Dec 27, 2023 8:35:56 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:35:56 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\n"}}
[debug] [2023-12-28T04:43:55.560Z] Dec 27, 2023 8:43:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead
INFO: Detected non-HTTP/2 connection.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:43:55 PM io.gapi.emulators.netty.HttpVersionRoutingHandler channelRead\nINFO: Detected non-HTTP/2 connection.\n"}}
[debug] [2023-12-28T04:43:55.582Z] Dec 27, 2023 8:43:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError
WARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
com.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)
	at com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)
	at com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)
	at com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)
	at io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)
	at io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)
	at io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)
	at io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)
	at io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)
	at io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)
	at io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)
	at io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:43:55 PM com.google.cloud.datastore.emulator.impl.util.WrappedStreamObserver onError\nWARNING: Operation failed: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\ncom.google.cloud.datastore.core.exception.DatastoreException: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1.getDocument(CloudFirestoreV1.java:275)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getDocument(CloudFirestoreV1Router.java:122)\n\tat com.google.cloud.datastore.emulator.impl.firestore.CloudFirestoreV1Router.getOrListDocuments(CloudFirestoreV1Router.java:116)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.lambda$getOrListDocuments$0(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter.unary(FirestoreV1GrpcAdapter.java:70)\n\tat com.google.cloud.datastore.emulator.firestore.v1.FirestoreV1GrpcAdapter$1.getOrListDocuments(FirestoreV1GrpcAdapter.java:106)\n\tat com.google.firestore.v1.FirestoreGrpc$MethodHandlers.invoke(FirestoreGrpc.java:1151)\n\tat io.grpc.stub.ServerCalls$UnaryServerCallHandler$UnaryServerCallListener.onHalfClose(ServerCalls.java:182)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.PartialForwardingServerCallListener.onHalfClose(PartialForwardingServerCallListener.java:35)\n\tat io.grpc.ForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:23)\n\tat io.grpc.ForwardingServerCallListener$SimpleForwardingServerCallListener.onHalfClose(ForwardingServerCallListener.java:40)\n\tat io.grpc.Contexts$ContextualizedServerCallListener.onHalfClose(Contexts.java:86)\n\tat io.grpc.internal.ServerCallImpl$ServerStreamListenerImpl.halfClosed(ServerCallImpl.java:346)\n\tat io.grpc.internal.ServerImpl$JumpToApplicationThreadServerStreamListener$1HalfClosed.runInContext(ServerImpl.java:860)\n\tat io.grpc.internal.ContextRunnable.run(ContextRunnable.java:37)\n\tat io.grpc.internal.SerializingExecutor.run(SerializingExecutor.java:133)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)\n\tat java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)\n\tat java.base/java.lang.Thread.run(Thread.java:1583)\n\n"}}
[debug] [2023-12-28T04:43:55.583Z] Dec 27, 2023 8:43:55 PM io.gapi.emulators.netty.HttpHandler$1 onError
INFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.
 {"metadata":{"emulator":{"name":"firestore"},"message":"Dec 27, 2023 8:43:55 PM io.gapi.emulators.netty.HttpHandler$1 onError\nINFO: Exception when handling request: NOT_FOUND: Document (projects/openid3-bbd1b/databases/(default)/documents/mns/0xe0c42af88b3fbd4f15826b6a182cacefe92f0113e68a492f3440757055241fcb) not found.\n"}}
[debug] [2023-12-28T04:45:38.984Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T04:45:38.982Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:45:38.990Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T04:45:38.982Z"],"workRunningCount":1}
[debug] [2023-12-28T04:45:38.992Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T04:45:39.058Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T04:45:39.060Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T04:45:39.062Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T04:45:39.069Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY"}}
[debug] [2023-12-28T04:45:39.158Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 90.612416ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 90.612416ms"}}
[debug] [2023-12-28T04:45:39.161Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE"}}
[debug] [2023-12-28T04:45:39.161Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T04:45:39.161Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T04:45:39.161Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:45:39.163Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T04:45:39.163Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:45:39.164Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/registerUserWithPasskey-2023-12-28T04:45:39.163Z"],"workRunningCount":1}
[debug] [2023-12-28T04:45:39.164Z] Accepted request POST /openid3-bbd1b/us-central1/registerUserWithPasskey --> us-central1-registerUserWithPasskey
[debug] [2023-12-28T04:45:39.168Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T04:45:39.168Z] [functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/registerUserWithPasskey, mapping to path=/"}}
[debug] [2023-12-28T04:45:39.168Z] [worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-registerUserWithPasskey)"}}
[info] i  functions: Beginning execution of "us-central1-registerUserWithPasskey" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Beginning execution of \"us-central1-registerUserWithPasskey\""}}
[debug] [2023-12-28T04:45:39.168Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: BUSY"}}
[debug] [2023-12-28T04:45:39.716Z] >>> [apiv2][query] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast [none]
[debug] [2023-12-28T04:45:39.716Z] >>> [apiv2][body] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast {"eventId":"5725bbdb-5cc1-4895-9192-4b08b31b00d0","eventType":"providers/firebase.auth/eventTypes/user.create","resource":{"name":"projects/openid3-bbd1b","service":"firebaseauth.googleapis.com"},"params":{},"timestamp":"2023-12-28T04:45:39.712Z","data":{"uid":"0xD61f270388A6d604CFD5E23dF52934C0E810bE8A","emailVerified":false,"metadata":{"creationTime":"2023-12-28T04:45:39.710Z","lastSignInTime":"2023-12-28T04:45:39.710Z"},"customClaims":{}}}
[debug] [2023-12-28T04:45:39.743Z] <<< [apiv2][status] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast 200
[debug] [2023-12-28T04:45:39.743Z] <<< [apiv2][body] POST http://127.0.0.1:5001/functions/projects/openid3-bbd1b/trigger_multicast {"status":"multicast_acknowledged"}
[debug] [2023-12-28T04:45:39.794Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-registerUserWithPasskey" in 625.59925ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finished \"us-central1-registerUserWithPasskey\" in 625.59925ms"}}
[debug] [2023-12-28T04:45:39.795Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: IDLE"}}
[debug] [2023-12-28T04:45:39.795Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T04:45:39.795Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T04:45:39.795Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:45:46.632Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T04:45:46.632Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:45:46.637Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T04:45:46.632Z"],"workRunningCount":1}
[debug] [2023-12-28T04:45:46.638Z] Accepted request OPTIONS /openid3-bbd1b/us-central1/sessionLogin --> us-central1-sessionLogin
[debug] [2023-12-28T04:45:46.647Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T04:45:46.648Z] [functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/"}}
[debug] [2023-12-28T04:45:46.649Z] [worker-pool] submitRequest(triggerId=us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sessionLogin)"}}
[info] i  functions: Beginning execution of "us-central1-sessionLogin" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Beginning execution of \"us-central1-sessionLogin\""}}
[debug] [2023-12-28T04:45:46.651Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY"}}
[debug] [2023-12-28T04:45:46.726Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sessionLogin" in 76.071083ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finished \"us-central1-sessionLogin\" in 76.071083ms"}}
[debug] [2023-12-28T04:45:46.727Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE"}}
[debug] [2023-12-28T04:45:46.727Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T04:45:46.728Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T04:45:46.728Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:45:46.738Z] [work-queue] {"queuedWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T04:45:46.738Z"],"queueLength":1,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:45:46.739Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":["/openid3-bbd1b/us-central1/sessionLogin-2023-12-28T04:45:46.738Z"],"workRunningCount":1}
[debug] [2023-12-28T04:45:46.739Z] Accepted request POST /openid3-bbd1b/us-central1/sessionLogin --> us-central1-sessionLogin
[debug] [2023-12-28T04:45:46.750Z] [functions] Runtime ready! Sending request! {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Runtime ready! Sending request!"}}
[debug] [2023-12-28T04:45:46.750Z] [functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/ {"metadata":{"emulator":{"name":"functions"},"message":"[functions] Got req.url=/openid3-bbd1b/us-central1/sessionLogin, mapping to path=/"}}
[debug] [2023-12-28T04:45:46.751Z] [worker-pool] submitRequest(triggerId=us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] submitRequest(triggerId=us-central1-sessionLogin)"}}
[info] i  functions: Beginning execution of "us-central1-sessionLogin" {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Beginning execution of \"us-central1-sessionLogin\""}}
[debug] [2023-12-28T04:45:46.751Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: BUSY"}}
[debug] [2023-12-28T04:45:46.885Z] Finishing up request with event=pause {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=pause"}}
[info] i  functions: Finished "us-central1-sessionLogin" in 134.306666ms {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finished \"us-central1-sessionLogin\" in 134.306666ms"}}
[debug] [2023-12-28T04:45:46.886Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: IDLE"}}
[debug] [2023-12-28T04:45:46.886Z] Finishing up request with event=finish {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=finish"}}
[debug] [2023-12-28T04:45:46.886Z] Finishing up request with event=close {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"Finishing up request with event=close"}}
[debug] [2023-12-28T04:45:46.886Z] [work-queue] {"queuedWork":[],"queueLength":0,"runningWork":[],"workRunningCount":0}
[debug] [2023-12-28T04:55:47.812Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T04:55:48.831Z] Validating nodejs source
[debug] [2023-12-28T04:55:49.835Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T04:55:49.836Z] Building nodejs source
[debug] [2023-12-28T04:55:49.837Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T04:55:49.845Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T04:55:49.856Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8760

[debug] [2023-12-28T04:55:51.026Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T04:55:51.060Z] [worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-registerUserWithPasskey)"}}
[debug] [2023-12-28T04:55:51.060Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: FINISHING"}}
[debug] [2023-12-28T04:55:51.061Z] [worker-pool] Shutting down IDLE worker (us-central1-sessionLogin) {"metadata":{"emulator":{"name":"functions"},"message":"[worker-pool] Shutting down IDLE worker (us-central1-sessionLogin)"}}
[debug] [2023-12-28T04:55:51.061Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: FINISHING {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: FINISHING"}}
[debug] [2023-12-28T04:55:51.070Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: exited"}}
[debug] [2023-12-28T04:55:51.071Z] [worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-sessionLogin"},"extension":{},"message":"[worker-us-central1-sessionLogin-096cb9ce-e323-4b18-a197-34c725b186aa]: FINISHED"}}
[debug] [2023-12-28T04:55:51.071Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: exited {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: exited"}}
[debug] [2023-12-28T04:55:51.072Z] [worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: FINISHED {"metadata":{"emulator":{"name":"functions"},"function":{"name":"us-central1-registerUserWithPasskey"},"extension":{},"message":"[worker-us-central1-registerUserWithPasskey-0033349e-51fe-42e6-b5fe-232be0b8dfc4]: FINISHED"}}
[debug] [2023-12-28T04:55:56.164Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T04:55:57.177Z] Validating nodejs source
[debug] [2023-12-28T04:55:58.405Z] > [functions] package.json contents: {
  "name": "@openid3/auth",
  "scripts": {
    "lint": "eslint --ext .js,.ts .",
    "build-deps": "cd common && npm run build && cd ../redpacket && npm run build && cd ..",
    "build": "rimraf lib && npm run lint && tsc",
    "build-all": "rimraf lib && npm run build-deps && npm run lint && tsc",
    "build:watch": "tsc --watch",
    "serve": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase emulators:start --only functions,auth,firestore,database",
    "shell": "CLOUD_RUNTIME_CONFIG=\"$(doppler secrets download --no-file | jq '{doppler: .}')\" firebase functions:shell",
    "start": "npm run shell",
    "secrets-sync": "firebase functions:config:unset doppler && firebase functions:config:set doppler=\"$(doppler secrets download --config prd --no-file)\"",
    "deploy": "npm run secrets-sync && firebase deploy --only functions",
    "logs": "firebase functions:log",
    "test": "jest"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@account-abstraction/utils": "^0.6.0",
    "@ethersproject/providers": "^5.7.2",
    "@google-cloud/kms": "^3.1.0",
    "@openid3/contracts": "^0.0.8",
    "@types/cookie": "^0.6.0",
    "@types/node": "^18.11.18",
    "@types/node-fetch": "^2.6.2",
    "@types/nodemailer": "^6.4.5",
    "@typescript-eslint/eslint-plugin": "^5.53.0",
    "axios": "^1.6.2",
    "base64url": "^3.0.1",
    "bn.js": "^5.2.1",
    "cookie": "^0.6.0",
    "cors": "^2.8.5",
    "cross-fetch": "^3.1.5",
    "crypto": "^1.0.1",
    "eciesjs": "^0.4.5",
    "ethers": "^6.8.1",
    "fast-crc32c": "^2.0.0",
    "firebase-admin": "^11.4.1",
    "firebase-functions": "^4.4.1"
  },
  "devDependencies": {
    "@noble/curves": "^1.2.0",
    "@types/bn.js": "^5.1.4",
    "@types/chai": "^4.3.6",
    "@types/cors": "^2.8.13",
    "@types/jest": "^29.5.7",
    "@types/mocha": "^10.0.2",
    "@typescript-eslint/parser": "^5.12.0",
    "commander": "^11.1.0",
    "eslint": "^8.9.0",
    "eslint-config-google": "^0.14.0",
    "eslint-plugin-import": "^2.25.4",
    "firebase-functions-test": "^3.1.0",
    "jest": "^29.7.0",
    "mocha": "^10.2.0",
    "secp256k1": "^5.0.0",
    "ts-jest": "^29.1.1",
    "typescript": "^4.9.5",
    "asn1.js": "^5.4.1"
  },
  "private": true
}
[debug] [2023-12-28T04:55:58.406Z] Building nodejs source
[debug] [2023-12-28T04:55:58.407Z] Failed to find version of module node: reached end of search path /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules
[info] ✔  functions: Using node@18 from host. 
[debug] [2023-12-28T04:55:58.411Z] Could not find functions.yaml. Must use http discovery
[debug] [2023-12-28T04:55:58.416Z] Found firebase-functions binary at '/Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/node_modules/.bin/firebase-functions'
[info] Serving at port 8297

[debug] [2023-12-28T04:55:59.532Z] Got response from /__/functions.yaml {"endpoints":{"getAddressByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getAddressByUid"},"getUserByAddress":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByAddress"},"getUserByUid":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getUserByUid"},"registerUserWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"registerUserWithPasskey"},"getPasskeyChallenge":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getPasskeyChallenge"},"loginWithPasskey":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"loginWithPasskey"},"sessionLogin":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"sessionLogin"},"getDeks":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"httpsTrigger":{},"entryPoint":"getDeks"}},"specVersion":"v1alpha1","requiredAPIs":[]}
[info] ✔  functions: Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks. {"metadata":{"emulator":{"name":"functions"},"message":"Loaded functions definitions from source: getAddressByUid, getUserByAddress, getUserByUid, registerUserWithPasskey, getPasskeyChallenge, loginWithPasskey, sessionLogin, getDeks."}}
[debug] [2023-12-28T04:57:54.742Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers"}}
[debug] [2023-12-28T04:57:54.747Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T04:57:54.757Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/functions/package.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/functions/package.json changed, reloading triggers"}}
[debug] [2023-12-28T04:57:54.758Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/functions/src/auth.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/functions/src/auth.ts changed, reloading triggers"}}
[debug] [2023-12-28T04:57:54.759Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/functions/src/global.d.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/functions/src/global.d.ts changed, reloading triggers"}}
[debug] [2023-12-28T04:57:54.833Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/package-lock.json changed, reloading triggers"}}
[debug] [2023-12-28T04:57:54.834Z] File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers {"metadata":{"emulator":{"name":"functions"},"message":"File /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/scripts/verifyPasskey.ts changed, reloading triggers"}}
[debug] [2023-12-28T04:57:55.843Z] Customer code is not Node
[debug] [2023-12-28T04:57:55.845Z] Customer code is not Python code.
[error] ⬢  functions: Failed to load function definition from source: FirebaseError: Could not detect language for functions at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/ {"metadata":{"emulator":{"name":"functions"},"message":"Failed to load function definition from source: FirebaseError: Could not detect language for functions at /Users/peterchen/Documents/Dev/MIZU/Projects/openid3-auth/"}}
